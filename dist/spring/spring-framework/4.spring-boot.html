<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://mister-hope.github.io/blog-notes/dist/spring/spring-framework/4.spring-boot.html"><meta property="og:title" content="Spring boot å­¦ä¹ æ€»ç»“"><meta property="og:description" content="Spring MVCã€ WebSocketã€ SockJSã€ STOMP Messagingã€‚"><meta property="og:type" content="article"><meta property="og:image" content="https://mister-hope.github.io/blog-notes/dist/"><meta property="og:locale" content="en-US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="Spring boot å­¦ä¹ æ€»ç»“"><meta property="article:author" content="Jimmy"><meta property="article:published_time" content="2023-07-18T00:00:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Spring boot å­¦ä¹ æ€»ç»“","image":["https://mister-hope.github.io/blog-notes/dist/"],"datePublished":"2023-07-18T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"Jimmy"}]}</script><title>Spring boot å­¦ä¹ æ€»ç»“</title><meta name="description" content="Spring MVCã€ WebSocketã€ SockJSã€ STOMP Messagingã€‚">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/blog-notes/dist/assets/style-13c73e89.css" as="style"><link rel="stylesheet" href="/blog-notes/dist/assets/style-13c73e89.css">
    <link rel="modulepreload" href="/blog-notes/dist/assets/app-6501f6c5.js"><link rel="modulepreload" href="/blog-notes/dist/assets/framework-b5ea9e64.js"><link rel="modulepreload" href="/blog-notes/dist/assets/4.spring-boot.html-ea0f937d.js"><link rel="modulepreload" href="/blog-notes/dist/assets/4.spring-boot.html-c2885c52.js"><link rel="prefetch" href="/blog-notes/dist/assets/intro.html-7efd489e.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-42d2388f.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/slides.html-1036404e.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/disable.html-f03b9a75.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/encrypt.html-f90755a2.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/markdown.html-7f05593b.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/page.html-158fbaa5.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-8c48aa1e.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/Javaä¸­çš„é”.html-2e0df466.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC02_LockSupportä¸ä¸­æ–­.html-b2c418e3.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC03Javaå†…å­˜æ¨¡å‹JMM.html-6d32a0fa.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC04_CAS.html-9cfe43c6.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC05_çº¿ç¨‹æ± ä¸å¹¶å‘å·¥å…·.html-fd732701.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC06_ThreadLocal.html-a93629c4.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-f1e01288.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/Java_collection.html-77d0c5f8.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-4753634c.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/deploy_Vuepress.html-182995dd.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/Java_basic.html-3c8f6dcd.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/notes.html-c7cbd50b.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-b92da684.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/dockerä¸­å®‰è£…redis.html-02aff323.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/Javaä¸­çš„é”.html-8d281476.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC02_LockSupportä¸ä¸­æ–­.html-2e4637d6.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC03Javaå†…å­˜æ¨¡å‹JMM.html-56ee9f3c.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC04_CAS.html-8c46b00d.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC05_çº¿ç¨‹æ± ä¸å¹¶å‘å·¥å…·.html-d8b834e1.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC06_ThreadLocal.html-51f204d9.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-184bf453.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/1.IoC-Container.html-e5babd28.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/2.Data-Access.html-3c633b14.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/3.mvc.html-8f465265.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-f5ec9342.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/404.html-c3a71fd8.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-aa5de5b3.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-a2a7f83c.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-1a488736.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-3d8b5fe2.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-0ba6f052.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-55a08566.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-40683010.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-f52bbf40.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-4b36d936.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-ebda6858.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-332e6cc8.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-6a6555ca.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-bbf216d7.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-b02b724c.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-ae687680.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-6906a502.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-6adc4f23.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-0fc697e3.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-6f4f8e93.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-f381a61e.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-a1702b8a.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-c7652788.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-ba949fcb.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-83388cdc.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-513986b6.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-3d2847e5.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-6a08dae6.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/intro.html-88bbbba3.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-f6fd53c8.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/slides.html-7d6ea186.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/disable.html-66a5c74b.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/encrypt.html-3033137a.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/markdown.html-04645215.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/page.html-8678032e.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-00448ff8.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/Javaä¸­çš„é”.html-212c25c7.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC02_LockSupportä¸ä¸­æ–­.html-91a0ba4e.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC03Javaå†…å­˜æ¨¡å‹JMM.html-3b6d620e.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC04_CAS.html-8e938d32.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC05_çº¿ç¨‹æ± ä¸å¹¶å‘å·¥å…·.html-a2dc7579.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC06_ThreadLocal.html-78509b3c.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-d4a810a8.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/Java_collection.html-cdbf1c7f.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-ad4dbd5c.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/deploy_Vuepress.html-73a76e4e.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/Java_basic.html-d3b0400e.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/notes.html-c80f1761.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-27266a57.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/dockerä¸­å®‰è£…redis.html-5c758f5b.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/Javaä¸­çš„é”.html-d6f38547.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC02_LockSupportä¸ä¸­æ–­.html-7dc61327.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC03Javaå†…å­˜æ¨¡å‹JMM.html-507d00d3.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC04_CAS.html-814740cf.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC05_çº¿ç¨‹æ± ä¸å¹¶å‘å·¥å…·.html-a6176707.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/JUC06_ThreadLocal.html-dd4236f7.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-9e123180.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/1.IoC-Container.html-39c042e5.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/2.Data-Access.html-78181af9.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/3.mvc.html-fcc5ae98.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-cbf614b5.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/404.html-efcbdfb8.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-11b87b78.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-4f9a4b5f.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-91822548.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-c8e4cb15.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-b93c98f4.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-c20b48b5.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-7a0739b7.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-7c752282.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-a36273be.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-980af55e.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-dbf81064.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-da90ef68.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-ca4faf6e.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-d80f1d2d.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-a3cf3b28.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-f69eb88c.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-9a262995.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-6ee8b06d.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-7a26a869.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-616a6c28.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-144bdc4f.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-e82c4191.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-64389379.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-28bf1937.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-5551fcaa.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-ff2ab13e.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index.html-025251c7.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/giscus-9b97f17f.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/auto-ba5ecab5.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/index-8764208e.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/flowchart-35969cab.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/mermaid.core-1769aac4.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/highlight.esm-a794bb63.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/markdown.esm-d92a2fc9.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/notes.esm-224f94d9.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/reveal.esm-e5069ce0.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/search.esm-2c3fba7d.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/VuePlayground-86af5b64.js" as="script"><link rel="prefetch" href="/blog-notes/dist/assets/photoswipe.esm-6e6cbe40.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/blog-notes/dist/" class="brand"><img class="logo" src="/blog-notes/dist/logo.svg" alt><!----><!----></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æŠ€æœ¯æ–‡ç« "><span class="title"><span class="font-icon icon iconfont icon-java" style=""></span>æŠ€æœ¯æ–‡ç« </span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/blog-notes/dist/juc_notes" class="nav-link" aria-label="JUC"><span class="font-icon icon iconfont icon-java" style=""></span>JUC<!----></a></li><li class="dropdown-item"><a href="/blog-notes/dist/java" class="nav-link" aria-label="java"><span class="font-icon icon iconfont icon-java" style=""></span>java<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ç”Ÿæ´»"><span class="title"><span class="font-icon icon iconfont icon-java" style=""></span>ç”Ÿæ´»</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/blog-notes/dist/juc_notes" class="nav-link" aria-label="JUC"><span class="font-icon icon iconfont icon-java" style=""></span>JUC<!----></a></li><li class="dropdown-item"><a href="/blog-notes/dist/java" class="nav-link" aria-label="java"><span class="font-icon icon iconfont icon-java" style=""></span>java<!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-java" style=""></span><span class="title">Java</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-database" style=""></span><span class="title">æ•°æ®åº“</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="font-icon icon iconfont icon-spring" style=""></span><span class="title">spring</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="font-icon icon iconfont icon-star" style=""></span><span class="title">springä¸springboot</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/blog-notes/dist/spring/spring-framework/1.IoC-Container.html" class="nav-link sidebar-link sidebar-page" aria-label="Iocå®¹å™¨å­¦ä¹ æ€»ç»“"><span class="font-icon icon iconfont icon-page" style=""></span>Iocå®¹å™¨å­¦ä¹ æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog-notes/dist/spring/spring-framework/2.Data-Access.html" class="nav-link sidebar-link sidebar-page" aria-label="æ•°æ®è®¿é—®å­¦ä¹ æ€»ç»“"><span class="font-icon icon iconfont icon-page" style=""></span>æ•°æ®è®¿é—®å­¦ä¹ æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog-notes/dist/spring/spring-framework/3.mvc.html" class="nav-link sidebar-link sidebar-page" aria-label="Spring MVC å­¦ä¹ æ€»ç»“"><span class="font-icon icon iconfont icon-page" style=""></span>Spring MVC å­¦ä¹ æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Spring boot å­¦ä¹ æ€»ç»“"><span class="font-icon icon iconfont icon-page" style=""></span>Spring boot å­¦ä¹ æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-computer" style=""></span><span class="title">è®¡ç®—æœºåŸºç¡€</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-other" style=""></span><span class="title">other</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-demo" style=""></span><span class="title">demo</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="font-icon icon iconfont icon-page" style=""></span>Spring boot å­¦ä¹ æ€»ç»“</h1><div class="page-info"><span class="page-author-info" aria-label="AuthorğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Jimmy</span></span><span property="author" content="Jimmy"></span></span><!----><span class="page-date-info" aria-label="Writing DateğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-07-18T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 36 min</span><meta property="timeRequired" content="PT36M"></span><span class="page-category-info" aria-label="CategoryğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category7 clickable" role="navigation">spring-all</span><meta property="articleSection" content="spring-all"></span><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">On This Page<button class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å…¥é—¨æ¡ˆä¾‹" class="router-link-active router-link-exact-active toc-link level1">å…¥é—¨æ¡ˆä¾‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#spring-boot-çš„è‡ªåŠ¨é…ç½®åŸç†" class="router-link-active router-link-exact-active toc-link level1">Spring-boot çš„è‡ªåŠ¨é…ç½®åŸç†</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#è‡ªå®šä¹‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ä¸å±æ€§ç»‘å®šæ¡ˆä¾‹" class="router-link-active router-link-exact-active toc-link level2">è‡ªå®šä¹‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ä¸å±æ€§ç»‘å®šæ¡ˆä¾‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#yamlé…ç½®" class="router-link-active router-link-exact-active toc-link level1">Yamlé…ç½®</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#è¯­æ³•" class="router-link-active router-link-exact-active toc-link level2">è¯­æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æ¡ˆä¾‹" class="router-link-active router-link-exact-active toc-link level2">æ¡ˆä¾‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#ç»†èŠ‚" class="router-link-active router-link-exact-active toc-link level2">ç»†èŠ‚</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#logging" class="router-link-active router-link-exact-active toc-link level1">Logging</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#é»˜è®¤çš„æ—¥å¿—çš„æ ¼å¼ä¸ä¿®æ”¹" class="router-link-active router-link-exact-active toc-link level2">é»˜è®¤çš„æ—¥å¿—çš„æ ¼å¼ä¸ä¿®æ”¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å¼€å‘æ—¶ä½¿ç”¨çš„æ—¥å¿—è®¾ç½®" class="router-link-active router-link-exact-active toc-link level2">å¼€å‘æ—¶ä½¿ç”¨çš„æ—¥å¿—è®¾ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æ—¥å¿—ç­‰çº§" class="router-link-active router-link-exact-active toc-link level2">æ—¥å¿—ç­‰çº§</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#è®¾ç½®æ—¥å¿—ç­‰çº§" class="router-link-active router-link-exact-active toc-link level3">è®¾ç½®æ—¥å¿—ç­‰çº§</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æ—¥å¿—åˆ†ç»„" class="router-link-active router-link-exact-active toc-link level2">æ—¥å¿—åˆ†ç»„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æ–‡ä»¶è¾“å‡º" class="router-link-active router-link-exact-active toc-link level2">æ–‡ä»¶è¾“å‡º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æ–‡ä»¶å½’æ¡£ä¸æ»šåŠ¨åˆ‡å‰²" class="router-link-active router-link-exact-active toc-link level2">æ–‡ä»¶å½’æ¡£ä¸æ»šåŠ¨åˆ‡å‰²</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#è‡ªå®šä¹‰é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level2">è‡ªå®šä¹‰é…ç½®æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#åˆ‡æ¢æ—¥å¿—ç»„åˆ" class="router-link-active router-link-exact-active toc-link level2">åˆ‡æ¢æ—¥å¿—ç»„åˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å°æ€»ç»“" class="router-link-active router-link-exact-active toc-link level2">å°æ€»ç»“</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#webå¼€å‘" class="router-link-active router-link-exact-active toc-link level1">webå¼€å‘</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#webmvcautoconfiguration-åŸç†" class="router-link-active router-link-exact-active toc-link level2">WebMvcAutoConfiguration åŸç†</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#ç”Ÿæ•ˆæ¡ä»¶" class="router-link-active router-link-exact-active toc-link level3">ç”Ÿæ•ˆæ¡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æ•ˆæœ" class="router-link-active router-link-exact-active toc-link level3">æ•ˆæœ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#webmvcconfigureræ¥å£" class="router-link-active router-link-exact-active toc-link level3">WebMvcConfigureræ¥å£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#é™æ€èµ„æºè§„åˆ™æºç " class="router-link-active router-link-exact-active toc-link level3">é™æ€èµ„æºè§„åˆ™æºç </a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å®éªŒ" class="router-link-active router-link-exact-active toc-link level4">å®éªŒ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#enablewebmvcconfiguration-æºç " class="router-link-active router-link-exact-active toc-link level3">EnableWebMvcConfiguration æºç </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#ä¸ºä»€ä¹ˆå®¹å™¨ä¸­æ”¾ä¸€ä¸ªwebmvcconfigurerå°±èƒ½é…ç½®åº•å±‚è¡Œä¸º" class="router-link-active router-link-exact-active toc-link level3">ä¸ºä»€ä¹ˆå®¹å™¨ä¸­æ”¾ä¸€ä¸ªWebMvcConfigurerå°±èƒ½é…ç½®åº•å±‚è¡Œä¸º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#webmvcconfigurationsupport" class="router-link-active router-link-exact-active toc-link level3">WebMvcConfigurationSupport</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#webåœºæ™¯" class="router-link-active router-link-exact-active toc-link level2">Webåœºæ™¯</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#è‡ªåŠ¨é…ç½®" class="router-link-active router-link-exact-active toc-link level3">è‡ªåŠ¨é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#é»˜è®¤æ•ˆæœ" class="router-link-active router-link-exact-active toc-link level3">é»˜è®¤æ•ˆæœ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#é™æ€èµ„æº" class="router-link-active router-link-exact-active toc-link level2">é™æ€èµ„æº</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#é»˜è®¤è§„åˆ™" class="router-link-active router-link-exact-active toc-link level3">é»˜è®¤è§„åˆ™</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æ¬¢è¿é¡µ" class="router-link-active router-link-exact-active toc-link level3">æ¬¢è¿é¡µ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#favicon" class="router-link-active router-link-exact-active toc-link level3">Favicon</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#ç¼“å­˜å®éªŒ" class="router-link-active router-link-exact-active toc-link level3">ç¼“å­˜å®éªŒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™" class="router-link-active router-link-exact-active toc-link level3">è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#é…ç½®æ–¹å¼" class="router-link-active router-link-exact-active toc-link level4">é…ç½®æ–¹å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#ä»£ç æ–¹å¼" class="router-link-active router-link-exact-active toc-link level4">ä»£ç æ–¹å¼</a></li><!----><!--]--></ul><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#è·¯å¾„åŒ¹é…" class="router-link-active router-link-exact-active toc-link level2">è·¯å¾„åŒ¹é…</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#anté£æ ¼è·¯å¾„ç”¨æ³•" class="router-link-active router-link-exact-active toc-link level3">Anté£æ ¼è·¯å¾„ç”¨æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æ¨¡å¼åˆ‡æ¢" class="router-link-active router-link-exact-active toc-link level3">æ¨¡å¼åˆ‡æ¢</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å†…å®¹åå•†" class="router-link-active router-link-exact-active toc-link level2">å†…å®¹åå•†</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å¤šç«¯å†…å®¹é€‚é…" class="router-link-active router-link-exact-active toc-link level3">å¤šç«¯å†…å®¹é€‚é…</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#é»˜è®¤è§„åˆ™-1" class="router-link-active router-link-exact-active toc-link level4">é»˜è®¤è§„åˆ™</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æ•ˆæœæ¼”ç¤º" class="router-link-active router-link-exact-active toc-link level4">æ•ˆæœæ¼”ç¤º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#é…ç½®åå•†è§„åˆ™ä¸æ”¯æŒç±»å‹" class="router-link-active router-link-exact-active toc-link level4">é…ç½®åå•†è§„åˆ™ä¸æ”¯æŒç±»å‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#è‡ªå®šä¹‰å†…å®¹è¿”å›" class="router-link-active router-link-exact-active toc-link level3">è‡ªå®šä¹‰å†…å®¹è¿”å›</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å¢åŠ yamlè¿”å›æ”¯æŒ" class="router-link-active router-link-exact-active toc-link level4">å¢åŠ yamlè¿”å›æ”¯æŒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æ€è€ƒ-å¦‚ä½•å¢åŠ å…¶ä»–" class="router-link-active router-link-exact-active toc-link level4">æ€è€ƒï¼šå¦‚ä½•å¢åŠ å…¶ä»–</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#httpmessageconverterçš„ç¤ºä¾‹å†™æ³•" class="router-link-active router-link-exact-active toc-link level4">HttpMessageConverterçš„ç¤ºä¾‹å†™æ³•</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å†…å®¹åå•†åŸç†-httpmessageconverter" class="router-link-active router-link-exact-active toc-link level3">å†…å®¹åå•†åŸç†-HttpMessageConverter</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#_1-responsebodyç”±httpmessageconverterå¤„ç†" class="router-link-active router-link-exact-active toc-link level4">1.@ResponseBodyç”±HttpMessageConverterå¤„ç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#_2-webmvcautoconfigurationæä¾›å‡ ç§é»˜è®¤httpmessageconverters" class="router-link-active router-link-exact-active toc-link level4">2. WebMvcAutoConfigurationæä¾›å‡ ç§é»˜è®¤HttpMessageConverters</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å‚è€ƒ" class="router-link-active router-link-exact-active toc-link level3">å‚è€ƒ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#é”™è¯¯å¤„ç†" class="router-link-active router-link-exact-active toc-link level2">é”™è¯¯å¤„ç†</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#é»˜è®¤æœºåˆ¶" class="router-link-active router-link-exact-active toc-link level3">é»˜è®¤æœºåˆ¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#è‡ªå®šä¹‰é”™è¯¯å“åº”" class="router-link-active router-link-exact-active toc-link level3">è‡ªå®šä¹‰é”™è¯¯å“åº”</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#è‡ªå®šä¹‰jsonå“åº”" class="router-link-active router-link-exact-active toc-link level4">è‡ªå®šä¹‰jsonå“åº”</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#è‡ªå®šä¹‰é¡µé¢å“åº”" class="router-link-active router-link-exact-active toc-link level4">è‡ªå®šä¹‰é¡µé¢å“åº”</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æœ€ä½³å®æˆ˜" class="router-link-active router-link-exact-active toc-link level4">æœ€ä½³å®æˆ˜</a></li><!----><!--]--></ul><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#åµŒå…¥å¼å®¹å™¨" class="router-link-active router-link-exact-active toc-link level2">åµŒå…¥å¼å®¹å™¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#è‡ªåŠ¨é…ç½®åŸç†" class="router-link-active router-link-exact-active toc-link level3">è‡ªåŠ¨é…ç½®åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#è‡ªå®šä¹‰" class="router-link-active router-link-exact-active toc-link level3">è‡ªå®šä¹‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æœ€ä½³å®è·µ" class="router-link-active router-link-exact-active toc-link level3">æœ€ä½³å®è·µ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å…¨é¢æ¥ç®¡springmvc" class="router-link-active router-link-exact-active toc-link level2">å…¨é¢æ¥ç®¡SpringMVC</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æœ€ä½³å®æˆ˜-1" class="router-link-active router-link-exact-active toc-link level2">æœ€ä½³å®æˆ˜</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#ä¸‰ç§æ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">ä¸‰ç§æ–¹å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#ä¸¤ç§æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level3">ä¸¤ç§æ¨¡å¼</a></li><!----><!--]--></ul><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æ•°æ®åº“å¼€å‘" class="router-link-active router-link-exact-active toc-link level1">æ•°æ®åº“å¼€å‘</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#è‡ªåŠ¨é…ç½®åŸç†-1" class="router-link-active router-link-exact-active toc-link level2">è‡ªåŠ¨é…ç½®åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å¿«é€Ÿå®šä½ç”Ÿæ•ˆçš„é…ç½®" class="router-link-active router-link-exact-active toc-link level2">å¿«é€Ÿå®šä½ç”Ÿæ•ˆçš„é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æ‰©å±•-æ•´åˆå…¶ä»–æ•°æ®æº" class="router-link-active router-link-exact-active toc-link level2">æ‰©å±•ï¼šæ•´åˆå…¶ä»–æ•°æ®æº</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#druid-æ•°æ®æº" class="router-link-active router-link-exact-active toc-link level3">Druid æ•°æ®æº</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#ç¤ºä¾‹æ•°æ®åº“" class="router-link-active router-link-exact-active toc-link level2">ç¤ºä¾‹æ•°æ®åº“</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#åŸºç¡€ç‰¹æ€§" class="router-link-active router-link-exact-active toc-link level1">åŸºç¡€ç‰¹æ€§</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#banner" class="router-link-active router-link-exact-active toc-link level2">Banner</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#springapplication" class="router-link-active router-link-exact-active toc-link level2">SpringApplication</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#fluentbuilder-api" class="router-link-active router-link-exact-active toc-link level2">FluentBuilder API</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#profiles" class="router-link-active router-link-exact-active toc-link level2">profiles</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æŒ‡å®šç¯å¢ƒ" class="router-link-active router-link-exact-active toc-link level4">æŒ‡å®šç¯å¢ƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#ç¯å¢ƒæ¿€æ´»" class="router-link-active router-link-exact-active toc-link level4">ç¯å¢ƒæ¿€æ´»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#ç¯å¢ƒåŒ…å«" class="router-link-active router-link-exact-active toc-link level4">ç¯å¢ƒåŒ…å«</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#profile-é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level3">Profile é…ç½®æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å¤–éƒ¨åŒ–é…ç½®" class="router-link-active router-link-exact-active toc-link level3">å¤–éƒ¨åŒ–é…ç½®</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#é…ç½®ä¼˜å…ˆçº§" class="router-link-active router-link-exact-active toc-link level4">é…ç½®ä¼˜å…ˆçº§</a></li><!----><!--]--></ul><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å¤–éƒ¨é…ç½®" class="router-link-active router-link-exact-active toc-link level2">å¤–éƒ¨é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å¯¼å…¥é…ç½®" class="router-link-active router-link-exact-active toc-link level2">å¯¼å…¥é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å±æ€§å ä½ç¬¦" class="router-link-active router-link-exact-active toc-link level2">å±æ€§å ä½ç¬¦</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å•å…ƒæµ‹è¯•-junit5" class="router-link-active router-link-exact-active toc-link level2">å•å…ƒæµ‹è¯• Junit5</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#æ ¸å¿ƒåŸç†" class="router-link-active router-link-exact-active toc-link level1">æ ¸å¿ƒåŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog-notes/dist/spring/spring-framework/4.spring-boot.html#å‚è€ƒ-1" class="router-link-active router-link-exact-active toc-link level1">å‚è€ƒ</a></li><!----><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><p>Spring MVCã€ WebSocketã€ SockJSã€ STOMP Messagingã€‚</p><!-- more --><h1 id="å…¥é—¨æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#å…¥é—¨æ¡ˆä¾‹" aria-hidden="true">#</a> å…¥é—¨æ¡ˆä¾‹</h1><p><code>pom.xml</code></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--    æ‰€æœ‰springbooté¡¹ç›®éƒ½å¿…é¡»ç»§æ‰¿è‡ª spring-boot-starter-parent --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--        webå¼€å‘çš„åœºæ™¯å¯åŠ¨å™¨ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// AppContext.java</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppContext</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">AppContext</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// HelloController.java</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Hello Spring boot3! &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨<code>AppContext.java</code>ã€‚è®¿é—®ï¼š<code>http://localhost:8080</code>ã€‚</p><h1 id="spring-boot-çš„è‡ªåŠ¨é…ç½®åŸç†" tabindex="-1"><a class="header-anchor" href="#spring-boot-çš„è‡ªåŠ¨é…ç½®åŸç†" aria-hidden="true">#</a> Spring-boot çš„è‡ªåŠ¨é…ç½®åŸç†</h1><p><code>@EnableAutoConfiguration</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token annotation punctuation">@AutoConfigurationPackage</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableAutoConfiguration</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token constant">ENABLED_OVERRIDE_PROPERTY</span> <span class="token operator">=</span> <span class="token string">&quot;spring.boot.enableautoconfiguration&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exclude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">excludeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“å‰æ³¨è§£çš„ä½œç”¨ï¼šSpringBootè‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒæ³¨è§£</p><ol><li>ç”±<code>@Import(AutoConfigurationImportSelector.class)</code>æä¾›åŠŸèƒ½ï¼šæ‰¹é‡ç»™å®¹å™¨ä¸­å¯¼å…¥ç»„ä»¶ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">AutoConfigurationEntry</span> <span class="token function">getAutoConfigurationEntry</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> annotationMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isEnabled</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">EMPTY_ENTRY</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">AnnotationAttributes</span> attributes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token comment">// è·å–æ‰€æœ‰çš„å€™é€‰é…ç½®ç±»</span>
        <span class="token comment">// ä½äº META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</span>
        <span class="token comment">// ä¸€å…± 142 ä¸ªç±»</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> configurations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCandidateConfigurations</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å»ä¸€ä¸‹é‡ï¼Œä»¥å…æœ‰ç›¸åŒçš„ XXXXAutoConfiguration</span>
        configurations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeDuplicates</span><span class="token punctuation">(</span>configurations<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å»æ‰æŒ‡å®šçš„éœ€è¦æ’é™¤çš„ AutoConfigurationã€‚åœ¨ EnableAutoConfigurationæ³¨è§£ä¸­è®¾ç½®çš„ exclude ä¸ excludeName</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> exclusions <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getExclusions</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">checkExcludedClasses</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        configurations<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span>exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å°†å½“å‰ç³»ç»Ÿä¸­ç”Ÿæ•ˆçš„XXXAutoConfiguration ä» CandidateConfigurations ä¸­è¿‡æ»¤å‡ºæ¥ã€@ConditionalOnXXXã€‘</span>
        configurations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getConfigurationClassFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>configurations<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fireAutoConfigurationImportEvents</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AutoConfigurationEntry</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><code>AutoConfigurationImportSelector.getCandidateConfigurations()</code> æ–¹æ³•å¯ä»¥è·å–åˆ°æ‰€æœ‰çš„å€™é€‰è‡ªåŠ¨é…ç½®ç±»ï¼Œä¸€å…±æ˜¯142ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼Œä½äºï¼š<code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>ã€‚</li><li>é€šè¿‡ <code>AutoConfigurationImportSelector::getConfigurationClassFilter()</code> å°†å½“å‰ç³»ç»Ÿéœ€è¦çš„ <code>AutoConfiguration</code> è¿‡æ»¤å‡ºæ¥ï¼ŒåŠ è½½åˆ°<code>IoC</code>å®¹å™¨ã€‚</li><li>è¿‡æ»¤æ˜¯é€šè¿‡ <code>@ConditionalOnXXX</code> åˆ¤æ–­æŸä¸ªé…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆã€‚</li><li>é€šè¿‡å½“å‰ç³»ç»Ÿéœ€è¦çš„ <code>AutoConfiguration</code>ï¼ŒåŠ è½½åœºæ™¯éœ€è¦çš„å…¶ä»–æ‰€æœ‰ä¾èµ–åŒ…ã€‚</li><li>è¿™ä¸ªæ—¶å€™å°±å®ç°äº†è‡ªåŠ¨å¯¼å…¥ã€‚</li><li>å¦‚ä½•å®ç°å±æ€§é…ç½®å‘¢ï¼Ÿå…ˆè§‚å¯Ÿä¸€ä¸‹ <code>DataSourceAutoConfiguration</code>ã€‚å¯ä»¥å‘ç°ä¸€ä¸ª <code>@EnableConfigurationProperties({DataSourceProperties.class})</code>ã€‚<code>EnableConfigurationProperties</code>æ˜¯å¼€å¯å±æ€§ç»‘å®šï¼Œå…¶ä¸­çš„ <code>DataSourceProperties.class</code>ä¸ºå…·ä½“æä¾›åŠŸèƒ½çš„ç±»ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@AutoConfiguration</span><span class="token punctuation">(</span>
    before <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">SqlInitializationAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">DataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">EmbeddedDatabaseType</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>
    type <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;io.r2dbc.spi.ConnectionFactory&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">DataSourceProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">DataSourcePoolMetadataProvidersConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataSourceAutoConfiguration</span> <span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è§‚å¯Ÿä¸€ä¸‹ <code>DataSourceProperties</code> å¯ä»¥å‘ç°è¯¥ç±»ç»‘å®šäº† <code>spring.datasource</code>è¿™ä¸ªå‰ç¼€ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>
    prefix <span class="token operator">=</span> <span class="token string">&quot;spring.datasource&quot;</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataSourceProperties</span> <span class="token keyword">implements</span> <span class="token class-name">BeanClassLoaderAware</span><span class="token punctuation">,</span> <span class="token class-name">InitializingBean</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">ClassLoader</span> classLoader<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> generateUniqueName <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">DataSource</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> driverClassName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> url<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> jndiName<span class="token punctuation">;</span>
    <span class="token comment">// ....</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‡ªåŠ¨é…ç½®æ€»ç»“ï¼š</p><ol><li>é€šè¿‡ <code>@EnableAutoConfiguration</code> è·å¾— Spring-boot çš„ <code>XXXAutoConfiguration</code>ã€‚</li><li>é€šè¿‡ <code>@ConditionalOnXXX</code>ï¼Œ<code>@AutoConfiguration</code>ç­‰æ¡ä»¶ï¼Œç¡®å®šæŸä¸ªé…ç½®ç±»æ˜¯å¦éœ€è¦ç”Ÿæ•ˆã€‚</li><li>å°†ç”Ÿæ•ˆçš„ <code>XXXAutoConfiguration</code> å’Œå…¶ä¸­çš„ <code>@Bean</code> ä»¥åŠ <code>XXXProperties</code> åŠ è½½åˆ°å®¹å™¨ã€‚</li><li>é€šè¿‡è§„å®šçš„ <code>XXXProperties</code>ä¸­ <code>@ConfigurationProperties</code> è§„å®šçš„ <code>prefix</code>ï¼Œå¯¹ <code>properties</code> æ–‡ä»¶è¿›è¡Œè§£æï¼Œå®ç°é…ç½®ç»‘å®šã€‚</li></ol><h2 id="è‡ªå®šä¹‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ä¸å±æ€§ç»‘å®šæ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ä¸å±æ€§ç»‘å®šæ¡ˆä¾‹" aria-hidden="true">#</a> è‡ªå®šä¹‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ä¸å±æ€§ç»‘å®šæ¡ˆä¾‹</h2><p>ã€todoã€‘</p><p>å®˜æ–¹çš„<code>starter</code>ï¼š<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h1 id="yamlé…ç½®" tabindex="-1"><a class="header-anchor" href="#yamlé…ç½®" aria-hidden="true">#</a> Yamlé…ç½®</h1><h2 id="è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#è¯­æ³•" aria-hidden="true">#</a> è¯­æ³•</h2><ul><li><strong>å¤§å°å†™æ•æ„Ÿ</strong></li><li>ä½¿ç”¨<strong>ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼Œk: vï¼Œä½¿ç”¨ç©ºæ ¼åˆ†å‰²k,v</strong></li><li>ç¼©è¿›æ—¶ä¸å…è®¸ä½¿ç”¨Tabé”®ï¼Œåªå…è®¸<strong>ä½¿ç”¨ç©ºæ ¼</strong>ã€‚æ¢è¡Œ</li><li>ç¼©è¿›çš„ç©ºæ ¼æ•°ç›®ä¸é‡è¦ï¼Œåªè¦<strong>ç›¸åŒå±‚çº§</strong>çš„å…ƒç´ <strong>å·¦ä¾§å¯¹é½</strong>å³å¯</li><li><strong># è¡¨ç¤ºæ³¨é‡Š</strong>ï¼Œä»è¿™ä¸ªå­—ç¬¦ä¸€ç›´åˆ°è¡Œå°¾ï¼Œéƒ½ä¼šè¢«è§£æå™¨å¿½ç•¥ã€‚</li></ul><p>æ”¯æŒçš„å†™æ³•ï¼š</p><ul><li><strong>å¯¹è±¡</strong>ï¼š<strong>é”®å€¼å¯¹</strong>çš„é›†åˆï¼Œå¦‚ï¼šæ˜ å°„ï¼ˆmapï¼‰/ å“ˆå¸Œï¼ˆhashï¼‰ / å­—å…¸ï¼ˆdictionaryï¼‰</li><li><strong>æ•°ç»„</strong>ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ï¼Œå¦‚ï¼šåºåˆ—ï¼ˆsequenceï¼‰ / åˆ—è¡¨ï¼ˆlistï¼‰</li><li><strong>çº¯é‡</strong>ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼ï¼Œå¦‚ï¼šå­—ç¬¦ä¸²ã€æ•°å­—ã€boolã€æ—¥æœŸ</li></ul><h2 id="æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹" aria-hidden="true">#</a> æ¡ˆä¾‹</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// Person.java</span>
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> height<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthDay<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> like<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Cat</span> cat<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> locations<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Cat</span><span class="token punctuation">&gt;</span></span> catsList<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Cat</span><span class="token punctuation">&gt;</span></span> catsMap<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">class</span> <span class="token class-name">Cat</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>application.yml</code></li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">person</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> name
  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">12</span>
  <span class="token key atrule">height</span><span class="token punctuation">:</span> <span class="token number">175.34</span>
  <span class="token key atrule">birth-day</span><span class="token punctuation">:</span> 2010/10/10 12<span class="token punctuation">:</span><span class="token datetime number">12:12</span>
  <span class="token key atrule">like</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">cat</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> å°å°
    <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">locations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;222&quot;</span><span class="token punctuation">]</span>
  <span class="token key atrule">cats-list</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> å°ç±³
      <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> å°å°å°
      <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">cats-map</span><span class="token punctuation">:</span>
    <span class="token key atrule">cat1</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> å°æ˜
      <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">10</span>
    <span class="token key atrule">cat02</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> å°æ
      <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">11</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç»“æœ</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// ç»“æœ
Person(name=name, age=12, height=175.34, birthDay=Sun Oct 10 12:12:12 CST 2010, like=true, cat=Cat(name=å°å°, age=2), locations=[111, 222], catsList=[Cat(name=å°ç±³, age=1), Cat(name=å°å°å°, age=3)], catsMap={cat1=Cat(name=å°æ˜, age=10), cat02=Cat(name=å°æ, age=11)})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç»†èŠ‚" tabindex="-1"><a class="header-anchor" href="#ç»†èŠ‚" aria-hidden="true">#</a> ç»†èŠ‚</h2><ul><li><p>birthDay æ¨èå†™ä¸º birth-day</p></li><li><p><strong>æ–‡æœ¬</strong>ï¼š</p></li><li><ul><li><strong>å•å¼•å·</strong>ä¸ä¼šè½¬ä¹‰ã€\n åˆ™ä¸ºæ™®é€šå­—ç¬¦ä¸²æ˜¾ç¤ºã€‘</li></ul></li><li><ul><li><strong>åŒå¼•å·</strong>ä¼šè½¬ä¹‰ã€\nä¼šæ˜¾ç¤ºä¸º<strong>æ¢è¡Œç¬¦</strong>ã€‘</li></ul></li><li><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">person</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> â€œname \n 132â€  <span class="token comment"># ä¼šå°† \n è¿›è¡Œè½¬ä¹‰</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&#39;name \n 132&#39;</span>  <span class="token comment"># ä¸ä¼šå°† \n è¿›è¡Œè½¬ä¹‰</span>
  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>å¤§æ–‡æœ¬</strong></p><ul><li><p><code>|</code>å¼€å¤´ï¼Œå¤§æ–‡æœ¬å†™åœ¨ä¸‹å±‚ï¼Œ<strong>ä¿ç•™æ–‡æœ¬æ ¼å¼</strong>ï¼Œ<strong>æ¢è¡Œç¬¦æ­£ç¡®æ˜¾ç¤º</strong></p></li><li><p><code>&gt;</code>å¼€å¤´ï¼Œå¤§æ–‡æœ¬å†™åœ¨ä¸‹å±‚ï¼ŒæŠ˜å æ¢è¡Œç¬¦</p></li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">person</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
  		fsdf
  		132131  # ä¿ç•™æ¢è¡Œç¬¦</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token scalar string">
  		fsdf
  		132131  # ä¸ä¿ç•™æ¢è¡Œç¬¦</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>å¤šæ–‡æ¡£åˆå¹¶</strong></p><ul><li>ä½¿ç”¨<code>---</code>ï¼Œå¯ä»¥å¯¹æ–‡æ¡£è¿›è¡Œåˆ†å±‚åˆ†çº§ã€‚</li></ul></li></ul><h1 id="logging" tabindex="-1"><a class="header-anchor" href="#logging" aria-hidden="true">#</a> Logging</h1><p>æ—¥å¿—çš„ <code>spring-boot-starter-logging</code>ï¼Œ<code>SpringBoot</code> é»˜è®¤åœ¨ <code>spring-boot-starter</code> ä¸­å·²ç»å¯¼å…¥äº†ã€‚é»˜è®¤ä½¿ç”¨çš„æ˜¯ <code>slf4j + logback</code>ã€‚</p><p>ç”±äºæ—¥å¿—æ˜¯ç³»ç»Ÿä¸€å¯åŠ¨å°±è¦ç”¨ï¼Œç›¸æ¯”äº <code>XXXAutoConfiguration</code> é…ç½®çš„ç»„ä»¶ï¼Œæ—¥å¿—éœ€è¦æ›´æ—©çš„é…ç½®ã€‚æ•…è€Œä¸èƒ½ä½¿ç”¨å…¶ä»–ç»„ä»¶çš„ <code>AutoConfiguration</code>çš„æ–¹å¼ï¼Œè€Œæ˜¯ä½¿ç”¨<code>ApplicationListener</code>ã€‚</p><h2 id="é»˜è®¤çš„æ—¥å¿—çš„æ ¼å¼ä¸ä¿®æ”¹" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤çš„æ—¥å¿—çš„æ ¼å¼ä¸ä¿®æ”¹" aria-hidden="true">#</a> é»˜è®¤çš„æ—¥å¿—çš„æ ¼å¼ä¸ä¿®æ”¹</h2><div class="language-cmd line-numbers-mode" data-ext="cmd"><pre class="language-cmd"><code>2023-03-31T13:56:17.511+08:00  INFO 4944 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-31T13:56:17.511+08:00  INFO 4944 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.7]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>é»˜è®¤è¾“å‡ºæ ¼å¼ï¼š</p><ul><li>æ—¶é—´å’Œæ—¥æœŸï¼šæ¯«ç§’çº§ç²¾åº¦</li><li>æ—¥å¿—çº§åˆ«ï¼šERROR, WARN, INFO, DEBUG, or TRACE.</li><li>è¿›ç¨‹ ID</li><li>---ï¼š æ¶ˆæ¯åˆ†å‰²ç¬¦</li><li>çº¿ç¨‹åï¼š ä½¿ç”¨[]åŒ…å«</li><li>Logger åï¼š é€šå¸¸æ˜¯äº§ç”Ÿæ—¥å¿—çš„<strong>ç±»å</strong></li><li>æ¶ˆæ¯ï¼š æ—¥å¿—è®°å½•çš„å†…å®¹</li></ul><p>æ³¨æ„ï¼š <code>logback</code> æ²¡æœ‰<code>FATAL</code>çº§åˆ«ï¼Œå¯¹åº”çš„æ˜¯<code>ERROR</code></p><p>é»˜è®¤å€¼ï¼šå‚ç…§ï¼š<code>spring-boot</code>åŒ…<code>additional-spring-configuration-metadata.json</code>æ–‡ä»¶</p><p>é»˜è®¤è¾“å‡ºæ ¼å¼å€¼ï¼š<code>%clr(%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSXXX}}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}</code></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>%d{}  æ ¼å¼åŒ–ä¸€ä¸ªæ—¥æœŸ
%-5: å¯¹é½		level çº§åˆ«
%logger 	ï¼šè¾“å‡ºæ—¥å¿—çš„ç±»
%msg 		ï¼šæ¶ˆæ¯
%nï¼š 		æ¢è¡Œ
%clr(){}     å½©è‰²æ˜¾ç¤º
å¯ä»¥é€‰æ‹©çš„é¢œè‰²ï¼šblue   cyanï¼šé’è‰²  faintï¼šæ·¡è‰²  greenï¼šç»¿è‰²  magentaï¼šç´«çº¢   redï¼šçº¢  yellow
${PID:- } ï¼š è¿™é‡Œçš„  ${PID:- } å¦‚æœæ²¡æœ‰ PID å°±æ˜¾ç¤º - ï¼Œ å¦‚æœæœ‰ PID å˜é‡ï¼Œå°±æŒ‰ç…§PIDçš„å€¼æ˜¾ç¤ºã€‚è¿™ä¹Ÿå°±æ˜¯è¯´æ˜å¯ä»¥å¯¹å…¶è¿›è¡Œå®šåˆ¶åŒ–çš„è®¾ç½®ã€‚ 

&quot;%clr(%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSXXX}}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä¿®æ”¹ä¸ºï¼š<code>&#39;%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger{15} ===&gt; %msg%n&#39;</code></p><ul><li>å•ç‹¬è®¾ç½®è¾“å‡ºæ—¥å¿—çš„å¹´æœˆæ—¥ï¼Œåœ¨ <code>application.yml</code> ä¸­</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">pattern</span><span class="token punctuation">:</span>
    <span class="token key atrule">dateformat</span><span class="token punctuation">:</span> yyyy<span class="token punctuation">-</span>MM<span class="token punctuation">-</span>dd HH<span class="token punctuation">:</span>mm<span class="token punctuation">:</span>ss.SSS
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é»˜è®¤çš„æ—¥å¿—è®¾ç½®éƒ½åœ¨ï¼š<code>org.springframework.boot:spring-boot ä¸‹ additional-spring-configuration-metadata.json</code></p><h2 id="å¼€å‘æ—¶ä½¿ç”¨çš„æ—¥å¿—è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#å¼€å‘æ—¶ä½¿ç”¨çš„æ—¥å¿—è®¾ç½®" aria-hidden="true">#</a> å¼€å‘æ—¶ä½¿ç”¨çš„æ—¥å¿—è®¾ç½®</h2><ul><li>æ‰‹åŠ¨åˆ›å»ºå¯¹è±¡çš„æ–¹å¼</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloDemo03</span> <span class="token punctuation">{</span>

    <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hellodemo03&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;hahah è¿›æ¥äº†&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>@Slf4j</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloDemo03</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hellodemo03&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;hahah è¿›æ¥äº†&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ—¥å¿—ç­‰çº§" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—ç­‰çº§" aria-hidden="true">#</a> æ—¥å¿—ç­‰çº§</h2><ul><li><p>ç”±ä½åˆ°é«˜ï¼š<code>ALL,TRACE, DEBUG, INFO, WARN, ERROR,FATAL,OFF</code>ï¼›</p></li><li><ul><li><strong>åªä¼šæ‰“å°æŒ‡å®šçº§åˆ«åŠä»¥ä¸Šçº§åˆ«çš„æ—¥å¿—</strong></li><li>ALLï¼šæ‰“å°æ‰€æœ‰æ—¥å¿—</li><li>TRACEï¼šè¿½è¸ªæ¡†æ¶è¯¦ç»†æµç¨‹æ—¥å¿—ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨</li><li>DEBUGï¼šå¼€å‘è°ƒè¯•ç»†èŠ‚æ—¥å¿—</li><li>INFOï¼šå…³é”®ã€æ„Ÿå…´è¶£ä¿¡æ¯æ—¥å¿—</li><li>WARNï¼šè­¦å‘Šä½†ä¸æ˜¯é”™è¯¯çš„ä¿¡æ¯æ—¥å¿—ï¼Œæ¯”å¦‚ï¼šç‰ˆæœ¬è¿‡æ—¶</li><li>ERRORï¼šä¸šåŠ¡é”™è¯¯æ—¥å¿—ï¼Œæ¯”å¦‚å‡ºç°å„ç§å¼‚å¸¸</li><li>FATALï¼šè‡´å‘½é”™è¯¯æ—¥å¿—ï¼Œæ¯”å¦‚jvmç³»ç»Ÿå´©æºƒ</li><li>OFFï¼šå…³é—­æ‰€æœ‰æ—¥å¿—è®°å½•</li></ul></li><li><p>ä¸æŒ‡å®šçº§åˆ«çš„æ‰€æœ‰ç±»ï¼Œéƒ½ä½¿ç”¨rootæŒ‡å®šçš„çº§åˆ«ä½œä¸ºé»˜è®¤çº§åˆ«</p></li><li><p>SpringBootæ—¥å¿—<strong>é»˜è®¤çº§åˆ«æ˜¯</strong> <strong>INFO</strong></p></li></ul><h3 id="è®¾ç½®æ—¥å¿—ç­‰çº§" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®æ—¥å¿—ç­‰çº§" aria-hidden="true">#</a> è®¾ç½®æ—¥å¿—ç­‰çº§</h3><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># é»˜è®¤ç­‰çº§ä¸‹ï¼Œå¦‚æœæŒ‡å®šå…·ä½“çš„æŸä¸ªç±»çš„æ—¥å¿—çº§åˆ«ï¼Œæ•´ä¸ªç³»ç»Ÿçš„æ—¥å¿—çº§åˆ«éƒ½éµå¾ª root çš„çº§åˆ«</span>
<span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">root</span><span class="token punctuation">:</span> debug
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥æŒ‡å®šå…·ä½“çš„æŸä¸ªåŒ…ä¸‹çš„ç±»ä½¿ç”¨å…·ä½“çš„ç­‰çº§ï¼Œå¦‚ä¸‹é…ç½®ã€‚æ­¤æ—¶ <code>com.hhyy.domain</code> ä¸‹çš„ç±»æ—¥å¿—ï¼Œåªä¼šæ‰“å° <code>warn</code> ä»¥ä¸Šçš„æ—¥å¿—ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">root</span><span class="token punctuation">:</span> info
    <span class="token key atrule">com</span><span class="token punctuation">:</span>
      <span class="token key atrule">hhyy</span><span class="token punctuation">:</span>
        <span class="token key atrule">domain</span><span class="token punctuation">:</span> warn
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ—¥å¿—åˆ†ç»„" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—åˆ†ç»„" aria-hidden="true">#</a> æ—¥å¿—åˆ†ç»„</h2><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">logging.group.tomcat</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.catalina,org.apache.coyote,org.apache.tomcat</span>
<span class="token comment"># è¿™æ ·å·²è®¾ç½®ï¼Œä¸Šé¢çš„ä¸€å †åŒ…ä¸‹çš„ç±»éƒ½è¢«è®¾ç½®ä¸ºinfoç­‰çº§çš„æ—¥å¿—</span>
<span class="token key attr-name">logging.level.tomcat</span><span class="token punctuation">=</span><span class="token value attr-value">info</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>springboot</code>æä¾›çš„é»˜è®¤åˆ†ç»„</li></ul><table><thead><tr><th>åˆ†ç»„å</th><th>åŒ…å</th></tr></thead><tbody><tr><td>sql</td><td>org.springframework.jdbc.core, org.hibernate.SQL, org.jooq.tools.LoggerListener</td></tr><tr><td>web</td><td>org.springframework.core.codec, org.springframework.http, <a href="http://org.springframework.web" target="_blank" rel="noopener noreferrer">org.springframework.web<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, <a href="http://org.springframework.boot.actuate.endpoint.web" target="_blank" rel="noopener noreferrer">org.springframework.boot.actuate.endpoint.web<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, org.springframework.boot.web.servlet.ServletContextInitializerBeans</td></tr></tbody></table><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># ä½¿ç”¨</span>
<span class="token key attr-name">logging.level.sql</span><span class="token punctuation">=</span><span class="token value attr-value">info</span>
<span class="token key attr-name">logging.level.web</span><span class="token punctuation">=</span><span class="token value attr-value">info</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ–‡ä»¶è¾“å‡º" tabindex="-1"><a class="header-anchor" href="#æ–‡ä»¶è¾“å‡º" aria-hidden="true">#</a> æ–‡ä»¶è¾“å‡º</h2><p><code>SpringBoot</code> é»˜è®¤åªæŠŠæ—¥å¿—å†™åœ¨æ§åˆ¶å°ï¼Œå¦‚æœæƒ³é¢å¤–è®°å½•åˆ°æ–‡ä»¶ï¼Œå¯ä»¥åœ¨<code>application.properties</code>ä¸­æ·»åŠ <code>logging.file.name</code> or <code>logging.file.path</code>é…ç½®é¡¹ã€‚</p><table><thead><tr><th><a href="http://logging.file.name" target="_blank" rel="noopener noreferrer">logging.file.name<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></th><th>logging.file.path</th><th>ç¤ºä¾‹</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>æœªæŒ‡å®š</td><td>æœªæŒ‡å®š</td><td></td><td>ä»…æ§åˆ¶å°è¾“å‡º</td></tr><tr><td><strong>æŒ‡å®š</strong></td><td>æœªæŒ‡å®š</td><td>my.log</td><td>å†™å…¥æŒ‡å®šæ–‡ä»¶ã€‚å¯ä»¥åŠ è·¯å¾„</td></tr><tr><td>æœªæŒ‡å®š</td><td><strong>æŒ‡å®š</strong></td><td>/var/log</td><td>å†™å…¥æŒ‡å®šç›®å½•ï¼Œæ–‡ä»¶åä¸º<code>spring.log</code></td></tr><tr><td><strong>æŒ‡å®š</strong></td><td><strong>æŒ‡å®š</strong></td><td></td><td>ä»¥<code>logging.file.name</code>ä¸ºå‡†</td></tr></tbody></table><h2 id="æ–‡ä»¶å½’æ¡£ä¸æ»šåŠ¨åˆ‡å‰²" tabindex="-1"><a class="header-anchor" href="#æ–‡ä»¶å½’æ¡£ä¸æ»šåŠ¨åˆ‡å‰²" aria-hidden="true">#</a> æ–‡ä»¶å½’æ¡£ä¸æ»šåŠ¨åˆ‡å‰²</h2><blockquote><p>å½’æ¡£ï¼šæ¯å¤©çš„æ—¥å¿—å•ç‹¬å­˜åˆ°ä¸€ä¸ªæ–‡æ¡£ä¸­ã€‚</p><p>åˆ‡å‰²ï¼šæ¯ä¸ªæ–‡ä»¶10MBï¼Œè¶…è¿‡å¤§å°åˆ‡å‰²æˆå¦å¤–ä¸€ä¸ªæ–‡ä»¶ã€‚</p></blockquote><ol><li>æ¯å¤©çš„æ—¥å¿—åº”è¯¥ç‹¬ç«‹åˆ†å‰²å‡ºæ¥å­˜æ¡£ã€‚å¦‚æœä½¿ç”¨<code>logback</code>ï¼ˆ<code>SpringBoot</code> é»˜è®¤æ•´åˆï¼‰ï¼Œå¯ä»¥é€šè¿‡<code>application.properties/yaml</code>æ–‡ä»¶æŒ‡å®šæ—¥å¿—æ»šåŠ¨è§„åˆ™ã€‚</li><li>å¦‚æœæ˜¯å…¶ä»–æ—¥å¿—ç³»ç»Ÿï¼Œéœ€è¦è‡ªè¡Œé…ç½®ï¼ˆæ·»åŠ <code>log4j2.xml</code>æˆ–<code>log4j2-spring.xml</code>ï¼‰</li><li>æ”¯æŒçš„æ»šåŠ¨è§„åˆ™è®¾ç½®å¦‚ä¸‹</li></ol><table><thead><tr><th>Name</th><th>description</th></tr></thead><tbody><tr><td>logging.logback.rollingpolicy.clean-history-on-start</td><td>åº”ç”¨å¯åŠ¨æ—¶æ˜¯å¦æ¸…é™¤ä»¥å‰å­˜æ¡£ï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰</td></tr><tr><td>logging.logback.rollingpolicy.max-file-size</td><td>å­˜æ¡£å‰ï¼Œæ¯ä¸ªæ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤§å°ï¼ˆé»˜è®¤å€¼ï¼š10MBï¼‰</td></tr><tr><td>logging.logback.rollingpolicy.total-size-cap</td><td>æ—¥å¿—æ–‡ä»¶è¢«åˆ é™¤ä¹‹å‰ï¼Œå¯ä»¥å®¹çº³çš„æœ€å¤§å¤§å°ï¼ˆé»˜è®¤å€¼ï¼š0Bï¼‰ã€‚è®¾ç½®1GBåˆ™ç£ç›˜å­˜å‚¨è¶…è¿‡ 1GB æ—¥å¿—åå°±ä¼šåˆ é™¤æ—§æ—¥å¿—æ–‡ä»¶</td></tr><tr><td>logging.logback.rollingpolicy.max-history</td><td>æ—¥å¿—æ–‡ä»¶ä¿å­˜çš„æœ€å¤§å¤©æ•°(é»˜è®¤å€¼ï¼š7).</td></tr><tr><td>logging.logback.rollingpolicy.file-name-pattern</td><td>æ—¥å¿—å­˜æ¡£çš„æ–‡ä»¶åæ ¼å¼ï¼ˆé»˜è®¤å€¼ï¼š${LOG_FILE}.%d{yyyy-MM-dd}.%i.gzï¼‰</td></tr></tbody></table><h2 id="è‡ªå®šä¹‰é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> è‡ªå®šä¹‰é…ç½®æ–‡ä»¶</h2><p>é€šå¸¸æˆ‘ä»¬é…ç½® <code>application.properties</code> å°±å¤Ÿäº†ã€‚å½“ç„¶ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ã€‚æ¯”å¦‚ï¼š</p><table><thead><tr><th>æ—¥å¿—ç³»ç»Ÿ</th><th>è‡ªå®šä¹‰</th></tr></thead><tbody><tr><td>Logback</td><td><code>logback-spring.xml, logback-spring.groovy, logback.xml, or logback.groovy</code></td></tr><tr><td>Log4j2</td><td><code>log4j2-spring.xml or log4j2.xml</code></td></tr><tr><td>JDK (Java Util Logging)</td><td><code>logging.properties</code></td></tr></tbody></table><p>å¦‚æœå¯èƒ½ï¼Œå»ºè®®åœ¨æ—¥å¿—é…ç½®ä¸­ä½¿ç”¨<code>-spring</code> å˜é‡ï¼ˆä¾‹å¦‚ï¼Œ<code>logback-spring.xml</code> è€Œä¸æ˜¯ <code>logback.xml</code>ï¼‰ã€‚å¦‚æœä½¿ç”¨æ ‡å‡†é…ç½®æ–‡ä»¶ï¼Œspring æ— æ³•å®Œå…¨æ§åˆ¶æ—¥å¿—åˆå§‹åŒ–ã€‚</p><p>æœ€ä½³å®æˆ˜ï¼šè‡ªå·±è¦å†™é…ç½®ï¼Œé…ç½®æ–‡ä»¶ååŠ ä¸Š <code>xx-spring.xml</code></p><h2 id="åˆ‡æ¢æ—¥å¿—ç»„åˆ" tabindex="-1"><a class="header-anchor" href="#åˆ‡æ¢æ—¥å¿—ç»„åˆ" aria-hidden="true">#</a> åˆ‡æ¢æ—¥å¿—ç»„åˆ</h2><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- ä½¿ç”¨å…¶ä»–çš„æ—¥å¿—åŒ…æ—¶ï¼Œéœ€è¦æ’é™¤springçš„é»˜è®¤æ—¥å¿—åŒ… --&gt;</span>    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-log4j2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>log4j2</code>æ”¯æŒ<code>yaml</code>å’Œ<code>json</code>æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚</p><table><thead><tr><th>æ ¼å¼</th><th>ä¾èµ–</th><th>æ–‡ä»¶å</th></tr></thead><tbody><tr><td>YAML</td><td><code>com.fasterxml.jackson.core:jackson-databind + com.fasterxml.jackson.dataformat:jackson-dataformat-yaml</code></td><td>log4j2.yaml + log4j2.yml</td></tr><tr><td>JSON</td><td><code>com.fasterxml.jackson.core:jackson-databind</code></td><td>log4j2.json + log4j2.jsn</td></tr></tbody></table><h2 id="å°æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å°æ€»ç»“" aria-hidden="true">#</a> å°æ€»ç»“</h2><ol><li>å¯¼å…¥ä»»ä½•ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œå…ˆæ’é™¤å®ƒçš„æ—¥å¿—åŒ…ï¼Œå› ä¸ºBootåº•å±‚æ§åˆ¶å¥½äº†æ—¥å¿—</li><li>ä¿®æ”¹ <code>application.properties</code> é…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥è°ƒæ•´æ—¥å¿—çš„æ‰€æœ‰è¡Œä¸ºã€‚å¦‚æœä¸å¤Ÿï¼Œå¯ä»¥ç¼–å†™æ—¥å¿—æ¡†æ¶è‡ªå·±çš„é…ç½®æ–‡ä»¶æ”¾åœ¨ç±»è·¯å¾„ä¸‹å°±è¡Œï¼Œæ¯”å¦‚<code>logback-spring.xml</code>ï¼Œ<code>log4j2-spring.xml</code></li><li>å¦‚éœ€å¯¹æ¥<strong>ä¸“ä¸šæ—¥å¿—ç³»ç»Ÿ</strong>ï¼Œä¹Ÿåªéœ€è¦æŠŠ logback è®°å½•çš„<strong>æ—¥å¿—</strong>çŒå€’ <strong>kafka</strong>ä¹‹ç±»çš„ä¸­é—´ä»¶ï¼Œè¿™å’ŒSpringBootæ²¡å…³ç³»ï¼Œéƒ½æ˜¯æ—¥å¿—æ¡†æ¶è‡ªå·±çš„é…ç½®ï¼Œ<strong>ä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯</strong></li><li><strong>ä¸šåŠ¡ä¸­ä½¿ç”¨slf4j-apiè®°å½•æ—¥å¿—ã€‚ä¸è¦å† sout äº†</strong></li></ol><h1 id="webå¼€å‘" tabindex="-1"><a class="header-anchor" href="#webå¼€å‘" aria-hidden="true">#</a> webå¼€å‘</h1><h2 id="webmvcautoconfiguration-åŸç†" tabindex="-1"><a class="header-anchor" href="#webmvcautoconfiguration-åŸç†" aria-hidden="true">#</a> WebMvcAutoConfiguration åŸç†</h2><h3 id="ç”Ÿæ•ˆæ¡ä»¶" tabindex="-1"><a class="header-anchor" href="#ç”Ÿæ•ˆæ¡ä»¶" aria-hidden="true">#</a> ç”Ÿæ•ˆæ¡ä»¶</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@AutoConfiguration</span><span class="token punctuation">(</span>after <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token class-name">DispatcherServletAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">TaskExecutionAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
		<span class="token class-name">ValidationAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//åœ¨è¿™äº›è‡ªåŠ¨é…ç½®ä¹‹å</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span><span class="token constant">SERVLET</span><span class="token punctuation">)</span> <span class="token comment">//å¦‚æœæ˜¯webåº”ç”¨å°±ç”Ÿæ•ˆï¼Œç±»å‹SERVLETã€REACTIVE å“åº”å¼web</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">Servlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">WebMvcConfigurationSupport</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">//å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªBeanï¼Œæ‰ç”Ÿæ•ˆã€‚é»˜è®¤å°±æ˜¯æ²¡æœ‰</span>
<span class="token annotation punctuation">@AutoConfigureOrder</span><span class="token punctuation">(</span><span class="token class-name">Ordered</span><span class="token punctuation">.</span><span class="token constant">HIGHEST_PRECEDENCE</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token comment">//ä¼˜å…ˆçº§</span>
<span class="token annotation punctuation">@ImportRuntimeHints</span><span class="token punctuation">(</span><span class="token class-name">WebResourcesRuntimeHints</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcAutoConfiguration</span> <span class="token punctuation">{</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ•ˆæœ" tabindex="-1"><a class="header-anchor" href="#æ•ˆæœ" aria-hidden="true">#</a> æ•ˆæœ</h3><ol><li><p>æ”¾äº†ä¸¤ä¸ªFilterï¼š</p></li><li><ol><li><code>HiddenHttpMethodFilter</code>ï¼›é¡µé¢è¡¨å•æäº¤<code>Rest</code>è¯·æ±‚ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰</li><li><code>FormContentFilter</code>ï¼š è¡¨å•å†…å®¹<code>Filter</code>ï¼ŒGETï¼ˆæ•°æ®æ”¾URLåé¢ï¼‰ã€POSTï¼ˆæ•°æ®æ”¾è¯·æ±‚ä½“ï¼‰è¯·æ±‚å¯ä»¥æºå¸¦æ•°æ®ï¼ŒPUTã€DELETE çš„è¯·æ±‚ä½“æ•°æ®ä¼šè¢«å¿½ç•¥</li></ol></li><li><p>ç»™å®¹å™¨ä¸­æ”¾äº†<code>WebMvcConfigurer</code>ç»„ä»¶ï¼›ç»™SpringMVCæ·»åŠ å„ç§å®šåˆ¶åŠŸèƒ½</p></li><li><ol><li>æ‰€æœ‰çš„åŠŸèƒ½æœ€ç»ˆä¼šå’Œé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®š</li><li>WebMvcPropertiesï¼š <code>spring.mvc</code>é…ç½®æ–‡ä»¶</li><li>WebPropertiesï¼š <code>spring.web</code>é…ç½®æ–‡ä»¶</li></ol></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">EnableWebMvcConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">//é¢å¤–å¯¼å…¥äº†å…¶ä»–é…ç½®</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">WebMvcProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">WebProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcAutoConfigurationAdapter</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">,</span> <span class="token class-name">ServletContextAware</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="webmvcconfigureræ¥å£" tabindex="-1"><a class="header-anchor" href="#webmvcconfigureræ¥å£" aria-hidden="true">#</a> WebMvcConfigureræ¥å£</h3><p>æä¾›äº†é…ç½®SpringMVCåº•å±‚çš„æ‰€æœ‰ç»„ä»¶å…¥å£</p><figure><img src="/blog-notes/dist/assets/1681093891854-26205c88-4c20-4b63-a2c3-02574778072f-cd679d35.png" alt="WebMvcConfigurer" tabindex="0" loading="lazy"><figcaption>WebMvcConfigurer</figcaption></figure><h3 id="é™æ€èµ„æºè§„åˆ™æºç " tabindex="-1"><a class="header-anchor" href="#é™æ€èµ„æºè§„åˆ™æºç " aria-hidden="true">#</a> é™æ€èµ„æºè§„åˆ™æºç </h3><p><code>WebMvcAutoConfigurationAdapter.addResourceHandlers()</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">isAddMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Default resource handling disabled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//1ã€</span>
    <span class="token function">addResourceHandler</span><span class="token punctuation">(</span>registry<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getWebjarsPathPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">&quot;classpath:/META-INF/resources/webjars/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">addResourceHandler</span><span class="token punctuation">(</span>registry<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getStaticPathPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>registration<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        registration<span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getStaticLocations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>servletContext <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">ServletContextResource</span> resource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletContextResource</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>servletContext<span class="token punctuation">,</span> <span class="token constant">SERVLET_LOCATION</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            registration<span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p>è§„åˆ™ä¸€ï¼šè®¿é—®ï¼š <code>/webjars/**</code>è·¯å¾„å°±å» <code>classpath:/META-INF/resources/webjars/</code>ä¸‹æ‰¾èµ„æº.</p><ol><li>maven å¯¼å…¥ä¾èµ–</li></ol></li><li><p>è§„åˆ™äºŒï¼šè®¿é—®ï¼š <code>/**</code>è·¯å¾„å°±å» <code>é™æ€èµ„æºé»˜è®¤çš„å››ä¸ªä½ç½®æ‰¾èµ„æº</code></p><ol><li><code>classpath:/META-INF/resources/</code></li><li><code>classpath:/resources/</code></li><li><code>classpath:/static/</code></li><li><code>classpath:/public/</code></li><li>ä»¥ä¸Šå››ä¸ªå€¼ï¼Œåœ¨<code>WebProperties</code>ç±»çš„ <code>CLASSPATH_RESOURCE_LOCATIONS</code> ä¸­ã€‚<code>&quot;classpath:/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot;</code></li></ol></li><li><p>è§„åˆ™ä¸‰ï¼š<strong>é™æ€èµ„æºé»˜è®¤éƒ½æœ‰ç¼“å­˜è§„åˆ™çš„è®¾ç½®</strong></p><ol><li>æ‰€æœ‰ç¼“å­˜çš„è®¾ç½®ï¼Œç›´æ¥é€šè¿‡<strong>é…ç½®æ–‡ä»¶</strong>ï¼š <code>spring.web</code></li><li>cachePeriodï¼š ç¼“å­˜å‘¨æœŸï¼› å¤šä¹…ä¸ç”¨æ‰¾æœåŠ¡å™¨è¦æ–°çš„ã€‚ é»˜è®¤æ²¡æœ‰ï¼Œä»¥sä¸ºå•ä½</li><li>cacheControlï¼š <strong>HTTPç¼“å­˜</strong>æ§åˆ¶ï¼›<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching#%E6%A6%82%E8%A7%88" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><strong>useLastModified</strong>ï¼šæ˜¯å¦ä½¿ç”¨æœ€åä¸€æ¬¡ä¿®æ”¹ã€‚é…åˆHTTP Cacheè§„åˆ™ï¼Œé»˜è®¤<code>true</code></li></ol></li></ol><blockquote><p>å¦‚æœæµè§ˆå™¨è®¿é—®äº†ä¸€ä¸ªé™æ€èµ„æº <code>index.js</code>ï¼Œå¦‚æœæœåŠ¡è¿™ä¸ªèµ„æºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä¸‹æ¬¡è®¿é—®çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥è®©æµè§ˆå™¨ç”¨è‡ªå·±ç¼“å­˜ä¸­çš„ä¸œè¥¿ï¼Œè€Œä¸ç”¨ç»™æœåŠ¡å™¨å‘è¯·æ±‚ã€‚</p></blockquote><h4 id="å®éªŒ" tabindex="-1"><a class="header-anchor" href="#å®éªŒ" aria-hidden="true">#</a> å®éªŒ</h4><p>åˆ›å»ºå¯¹åº”çš„é™æ€èµ„æº</p><figure><img src="/blog-notes/dist/assets/image-20230720114813606-56a26ff6.png" alt="image-20230720114813606" tabindex="0" loading="lazy"><figcaption>image-20230720114813606</figcaption></figure><p>åˆ†åˆ«è®¿é—®ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>http://localhost:8080/webjars/jars.html
http://localhost:8080/public.html
http://localhost:8080/resources.html
http://localhost:8080/static.html
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="enablewebmvcconfiguration-æºç " tabindex="-1"><a class="header-anchor" href="#enablewebmvcconfiguration-æºç " aria-hidden="true">#</a> EnableWebMvcConfiguration æºç </h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// SpringBoot ç»™å®¹å™¨ä¸­æ”¾ WebMvcConfigurationSupport ç»„ä»¶ã€‚</span>
<span class="token comment">//æˆ‘ä»¬å¦‚æœè‡ªå·±æ”¾äº† WebMvcConfigurationSupport ç»„ä»¶ï¼ŒBootçš„WebMvcAutoConfigurationéƒ½ä¼šå¤±æ•ˆã€‚</span>
<span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">WebProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">EnableWebMvcConfiguration</span> <span class="token keyword">extends</span> <span class="token class-name">DelegatingWebMvcConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">ResourceLoaderAware</span> 
<span class="token punctuation">{</span>

    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p><code>XXXHandlerMapping</code>ï¼š æ¯ä¸€ä¸ª <code>handlerMapping</code> çš„ä½œç”¨éƒ½æ˜¯æ ¹æ®è¯·æ±‚è·¯å¾„ <code> /XXX</code> æ‰¾å“ªä¸ª<code>handler</code>èƒ½å¤„ç†è¯·æ±‚</p></li><li><ol><li><code>WelcomePageHandlerMapping</code>ï¼š</li></ol></li><li><ol><li><ol><li>è®¿é—® <code>/**</code>è·¯å¾„ä¸‹çš„æ‰€æœ‰è¯·æ±‚ï¼Œéƒ½åœ¨ä»¥å‰å››ä¸ªé™æ€èµ„æºè·¯å¾„ä¸‹æ‰¾ï¼Œæ¬¢è¿é¡µä¹Ÿä¸€æ ·</li><li>æ‰¾<code>index.html</code>ï¼šåªè¦é™æ€èµ„æºçš„ä½ç½®æœ‰ä¸€ä¸ª <code>index.html</code>é¡µé¢ï¼Œé¡¹ç›®å¯åŠ¨é»˜è®¤è®¿é—®</li></ol></li></ol></li></ol><h3 id="ä¸ºä»€ä¹ˆå®¹å™¨ä¸­æ”¾ä¸€ä¸ªwebmvcconfigurerå°±èƒ½é…ç½®åº•å±‚è¡Œä¸º" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆå®¹å™¨ä¸­æ”¾ä¸€ä¸ªwebmvcconfigurerå°±èƒ½é…ç½®åº•å±‚è¡Œä¸º" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆå®¹å™¨ä¸­æ”¾ä¸€ä¸ª<code>WebMvcConfigurer</code>å°±èƒ½é…ç½®åº•å±‚è¡Œä¸º</h3><ol><li><code>WebMvcAutoConfiguration</code> æ˜¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼Œå®ƒé‡Œé¢æœ‰ä¸€ä¸ª <code>EnableWebMvcConfiguration</code></li><li><code>EnableWebMvcConfiguration</code>ç»§æ‰¿ä¸ <code>DelegatingWebMvcConfiguration</code>ï¼Œè¿™ä¸¤ä¸ªéƒ½ç”Ÿæ•ˆ</li><li><code>DelegatingWebMvcConfiguration</code>åˆ©ç”¨ DI æŠŠå®¹å™¨ä¸­ æ‰€æœ‰ <code>WebMvcConfigurer </code>æ³¨å…¥è¿›æ¥</li><li>åˆ«äººè°ƒç”¨ <code>DelegatingWebMvcConfiguration</code> çš„æ–¹æ³•é…ç½®åº•å±‚è§„åˆ™ï¼Œè€Œå®ƒè°ƒç”¨æ‰€æœ‰ <code>WebMvcConfigurer</code>çš„é…ç½®åº•å±‚æ–¹æ³•ã€‚</li></ol><blockquote><p>åŒæ—¶å¯ä»¥å‚è€ƒåé¢çš„ç« èŠ‚ï¼šwebå¼€å‘ &gt; é™æ€èµ„æº &gt; è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™ &gt; ä»£ç æ–¹å¼</p></blockquote><h3 id="webmvcconfigurationsupport" tabindex="-1"><a class="header-anchor" href="#webmvcconfigurationsupport" aria-hidden="true">#</a> WebMvcConfigurationSupport</h3><p>æä¾›äº†å¾ˆå¤šçš„é»˜è®¤è®¾ç½®ã€‚</p><p>åˆ¤æ–­ç³»ç»Ÿä¸­æ˜¯å¦æœ‰ç›¸åº”çš„ç±»ï¼šå¦‚æœæœ‰ï¼Œå°±åŠ å…¥ç›¸åº”çš„<code>HttpMessageConverter</code>ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>jackson2Present <span class="token operator">=</span> <span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token string">&quot;com.fasterxml.jackson.databind.ObjectMapper&quot;</span><span class="token punctuation">,</span> classLoader<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
				<span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token string">&quot;com.fasterxml.jackson.core.JsonGenerator&quot;</span><span class="token punctuation">,</span> classLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>
jackson2XmlPresent <span class="token operator">=</span> <span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token string">&quot;com.fasterxml.jackson.dataformat.xml.XmlMapper&quot;</span><span class="token punctuation">,</span> classLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>
jackson2SmilePresent <span class="token operator">=</span> <span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token string">&quot;com.fasterxml.jackson.dataformat.smile.SmileFactory&quot;</span><span class="token punctuation">,</span> classLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="webåœºæ™¯" tabindex="-1"><a class="header-anchor" href="#webåœºæ™¯" aria-hidden="true">#</a> Webåœºæ™¯</h2><h3 id="è‡ªåŠ¨é…ç½®" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨é…ç½®" aria-hidden="true">#</a> è‡ªåŠ¨é…ç½®</h3><ol><li>æ•´åˆwebåœºæ™¯</li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ã€å¼•å…¥äº† <code>autoconfigure</code>åŠŸèƒ½</p><p>3ã€<code>@EnableAutoConfiguration</code>æ³¨è§£ä½¿ç”¨<code>@Import(AutoConfigurationImportSelector.class)</code>æ‰¹é‡å¯¼å…¥ç»„ä»¶</p><p>4ã€åŠ è½½ <code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code> æ–‡ä»¶ä¸­é…ç½®çš„æ‰€æœ‰ç»„ä»¶</p><p>5ã€æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»å¦‚ä¸‹</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration
org.springframework.boot.autoconfigure.web.embedded.EmbeddedWebServerFactoryCustomizerAutoConfiguration
====ä»¥ä¸‹æ˜¯å“åº”å¼webåœºæ™¯å’Œç°åœ¨çš„æ²¡å…³ç³»======
org.springframework.boot.autoconfigure.web.reactive.HttpHandlerAutoConfiguration
org.springframework.boot.autoconfigure.web.reactive.ReactiveMultipartAutoConfiguration
org.springframework.boot.autoconfigure.web.reactive.ReactiveWebServerFactoryAutoConfiguration
org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration
org.springframework.boot.autoconfigure.web.reactive.WebSessionIdResolverAutoConfiguration
org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration
org.springframework.boot.autoconfigure.web.reactive.function.client.ClientHttpConnectorAutoConfiguration
org.springframework.boot.autoconfigure.web.reactive.function.client.WebClientAutoConfiguration
================ä»¥ä¸Šæ²¡å…³ç³»=================
org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfiguration
org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration
org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration
org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration
org.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfiguration
org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>6ã€ç»‘å®šäº†é…ç½®æ–‡ä»¶çš„ä¸€å †é…ç½®é¡¹</p><ul><li>1ã€SpringMVCçš„æ‰€æœ‰é…ç½® <code>spring.mvc</code></li><li>2ã€Webåœºæ™¯é€šç”¨é…ç½® <code>spring.web</code></li><li>3ã€æ–‡ä»¶ä¸Šä¼ é…ç½® <code>spring.servlet.multipart</code></li><li>4ã€æœåŠ¡å™¨çš„é…ç½® <code>server</code>: æ¯”å¦‚ï¼šç¼–ç æ–¹å¼</li></ul><h3 id="é»˜è®¤æ•ˆæœ" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤æ•ˆæœ" aria-hidden="true">#</a> é»˜è®¤æ•ˆæœ</h3><p>é»˜è®¤é…ç½®ï¼š</p><ol><li>åŒ…å«äº† <code>ContentNegotiatingViewResolver</code> å’Œ <code>BeanNameViewResolver</code> ç»„ä»¶ï¼Œæ–¹ä¾¿è§†å›¾è§£æ</li><li>é»˜è®¤çš„é™æ€èµ„æºå¤„ç†æœºåˆ¶ï¼š é™æ€èµ„æºæ”¾åœ¨ <code>static</code> æ–‡ä»¶å¤¹ä¸‹å³å¯ç›´æ¥è®¿é—®</li><li>è‡ªåŠ¨æ³¨å†Œäº† <code>Converter,GenericConverter,Formatter</code>ç»„ä»¶ï¼Œé€‚é…å¸¸è§æ•°æ®ç±»å‹è½¬æ¢å’Œæ ¼å¼åŒ–éœ€æ±‚</li><li>æ”¯æŒ <code>HttpMessageConverters</code>ï¼Œå¯ä»¥æ–¹ä¾¿è¿”å›<code>json</code>ç­‰æ•°æ®ç±»å‹</li><li>æ³¨å†Œ <code>MessageCodesResolver</code>ï¼Œæ–¹ä¾¿å›½é™…åŒ–åŠé”™è¯¯æ¶ˆæ¯å¤„ç†</li><li><strong>æ”¯æŒ é™æ€</strong> index.html</li><li><strong>è‡ªåŠ¨ä½¿ç”¨</strong><code>ConfigurableWebBindingInitializer</code>ï¼Œå®ç°æ¶ˆæ¯å¤„ç†ã€æ•°æ®ç»‘å®šã€ç±»å‹è½¬åŒ–ã€æ•°æ®æ ¡éªŒç­‰åŠŸèƒ½ã€‚</li></ol><p><strong>é‡è¦ï¼š</strong></p><ul><li>å¦‚æœæƒ³ä¿æŒ <code>boot mvc</code> çš„é»˜è®¤é…ç½®ï¼Œå¹¶ä¸”è‡ªå®šä¹‰æ›´å¤šçš„ mvc é…ç½®ï¼Œå¦‚ï¼š<strong>interceptors</strong>, <strong>formatters</strong>,<strong>view controllers</strong> ç­‰ã€‚å¯ä»¥ä½¿ç”¨**@Configuration**æ³¨è§£æ·»åŠ ä¸€ä¸ª <code>WebMvcConfigurer</code> ç±»å‹çš„é…ç½®ç±»ï¼Œå¹¶ä¸è¦æ ‡æ³¨ <em>@EnableWebMvc</em></li><li>å¦‚æœæƒ³ä¿æŒ <code>boot mvc</code> çš„é»˜è®¤é…ç½®ï¼Œä½†è¦è‡ªå®šä¹‰æ ¸å¿ƒç»„ä»¶å®ä¾‹ï¼Œæ¯”å¦‚ï¼š<code>RequestMappingHandlerMapping</code>, <code>RequestMappingHandlerAdapter</code>, æˆ–<code>ExceptionHandlerExceptionResolver</code>ï¼Œç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª <code>WebMvcRegistrations</code> ç»„ä»¶å³å¯ã€‚</li><li>å¦‚æœæƒ³å…¨é¢æ¥ç®¡ <code>Spring MVC</code>ï¼Œ<code>@Configuration</code> æ ‡æ³¨ä¸€ä¸ªé…ç½®ç±»ï¼Œå¹¶åŠ ä¸Š<code>@EnableWebMvc</code>æ³¨è§£ï¼Œå®ç° <code>WebMvcConfigurer</code> æ¥å£</li></ul><h2 id="é™æ€èµ„æº" tabindex="-1"><a class="header-anchor" href="#é™æ€èµ„æº" aria-hidden="true">#</a> é™æ€èµ„æº</h2><h3 id="é»˜è®¤è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤è§„åˆ™" aria-hidden="true">#</a> é»˜è®¤è§„åˆ™</h3><p>é™æ€èµ„æºæ˜ å°„è§„åˆ™åœ¨ <code>WebMvcAutoConfiguration</code> ä¸­è¿›è¡Œäº†å®šä¹‰ï¼š</p><ol><li><p><code>http://localhost:8080/webjars/**</code> çš„æ‰€æœ‰è·¯å¾„èµ„æºéƒ½åœ¨ <code>classpath:/META-INF/resources/webjars/</code></p></li><li><p><code>/**</code> çš„æ‰€æœ‰è·¯å¾„èµ„æºéƒ½åœ¨ <code>classpath:/META-INF/resources/ã€classpath:/resources/ã€classpath:/static/ã€classpath:/public/</code></p></li><li><p>æ‰€æœ‰é™æ€èµ„æºéƒ½å®šä¹‰äº†<strong>ç¼“å­˜è§„åˆ™</strong>ã€‚ã€æµè§ˆå™¨è®¿é—®è¿‡ä¸€æ¬¡ï¼Œå°±ä¼šç¼“å­˜ä¸€æ®µæ—¶é—´ã€‘ï¼Œä½†æ­¤åŠŸèƒ½å‚æ•°<strong>æ— é»˜è®¤å€¼</strong></p><ul><li>periodï¼š ç¼“å­˜é—´éš”ã€‚ é»˜è®¤ 0sï¼›</li><li>cacheControlï¼šç¼“å­˜æ§åˆ¶ã€‚ é»˜è®¤æ— ï¼›</li><li>useLastModifiedï¼šæ˜¯å¦ä½¿ç”¨lastModifiedå¤´ã€‚ é»˜è®¤ä¸º true</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// WebProperties.java</span>
<span class="token keyword">class</span> <span class="token class-name">Cache</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> useLastModified <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="æ¬¢è¿é¡µ" tabindex="-1"><a class="header-anchor" href="#æ¬¢è¿é¡µ" aria-hidden="true">#</a> æ¬¢è¿é¡µ</h3><p>æ¬¢è¿é¡µè§„åˆ™åœ¨ <code>WebMvcAutoConfiguration</code> ä¸­è¿›è¡Œäº†å®šä¹‰ï¼š</p><ol><li>åœ¨<strong>é™æ€èµ„æº</strong>ç›®å½•ä¸‹æ‰¾ <code>index.html</code></li><li>æ²¡æœ‰å°±åœ¨ <code>templates</code>ä¸‹æ‰¾<code>index</code>æ¨¡æ¿é¡µ</li></ol><h3 id="favicon" tabindex="-1"><a class="header-anchor" href="#favicon" aria-hidden="true">#</a> Favicon</h3><ol><li>åœ¨é™æ€èµ„æºç›®å½•ä¸‹æ‰¾ <code>favicon.ico</code></li></ol><h3 id="ç¼“å­˜å®éªŒ" tabindex="-1"><a class="header-anchor" href="#ç¼“å­˜å®éªŒ" aria-hidden="true">#</a> ç¼“å­˜å®éªŒ</h3><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">9000</span>

<span class="token comment">#1ã€spring.webï¼š</span>
<span class="token comment"># 1.é…ç½®å›½é™…åŒ–çš„åŒºåŸŸä¿¡æ¯</span>
<span class="token comment"># 2.é™æ€èµ„æºç­–ç•¥(å¼€å¯ã€å¤„ç†é“¾ã€ç¼“å­˜)</span>

<span class="token comment">#å¼€å¯é™æ€èµ„æºæ˜ å°„è§„åˆ™ (é»˜è®¤å°±æ˜¯ true)</span>
<span class="token key attr-name">spring.web.resources.add-mappings</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>

<span class="token comment">#è®¾ç½®ç¼“å­˜	</span>
<span class="token comment">#spring.web.resources.cache.period=3600</span>
<span class="token comment">## ç¼“å­˜è¯¦ç»†åˆå¹¶é¡¹æ§åˆ¶ï¼Œè¦†ç›–periodé…ç½®ï¼š</span>
<span class="token comment">## æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨æ­¤èµ„æºç¼“å­˜7200ç§’ï¼Œ7200ç§’ä»¥å†…çš„æ‰€æœ‰æ­¤èµ„æºè®¿é—®ä¸ç”¨å‘ç»™æœåŠ¡å™¨è¯·æ±‚ï¼Œ7200ç§’ä»¥åå‘è¯·æ±‚ç»™æœåŠ¡å™¨</span>
<span class="token key attr-name">spring.web.resources.cache.cachecontrol.max-age</span><span class="token punctuation">=</span><span class="token value attr-value">7200</span>
<span class="token comment">#ä½¿ç”¨èµ„æº last-modified æ—¶é—´ï¼Œæ¥å¯¹æ¯”æœåŠ¡å™¨å’Œæµè§ˆå™¨çš„èµ„æºæ˜¯å¦ç›¸åŒæ²¡æœ‰å˜åŒ–ã€‚ç›¸åŒè¿”å› 304</span>
<span class="token key attr-name">spring.web.resources.cache.use-last-modified</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™" aria-hidden="true">#</a> è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™</h3><blockquote><p>è‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„ã€è‡ªå®šä¹‰ç¼“å­˜è§„åˆ™</p></blockquote><h4 id="é…ç½®æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#é…ç½®æ–¹å¼" aria-hidden="true">#</a> é…ç½®æ–¹å¼</h4><p><code>spring.mvc</code>ï¼š é™æ€èµ„æºè®¿é—®å‰ç¼€è·¯å¾„</p><p><code>spring.web</code>ï¼š</p><ul><li>é™æ€èµ„æºç›®å½•</li><li>é™æ€èµ„æºç¼“å­˜ç­–ç•¥</li></ul><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment">#1ã€spring.webï¼š</span>
<span class="token comment"># 1.é…ç½®å›½é™…åŒ–çš„åŒºåŸŸä¿¡æ¯</span>
<span class="token comment"># 2.é™æ€èµ„æºç­–ç•¥(å¼€å¯ã€å¤„ç†é“¾ã€ç¼“å­˜)</span>

<span class="token comment">#å¼€å¯é™æ€èµ„æºæ˜ å°„è§„åˆ™</span>
<span class="token key attr-name">spring.web.resources.add-mappings</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>

<span class="token comment">#è®¾ç½®ç¼“å­˜</span>
<span class="token key attr-name">spring.web.resources.cache.period</span><span class="token punctuation">=</span><span class="token value attr-value">3600</span>
<span class="token comment">##ç¼“å­˜è¯¦ç»†åˆå¹¶é¡¹æ§åˆ¶ï¼Œè¦†ç›–periodé…ç½®ï¼š</span>
<span class="token comment">## æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨æ­¤èµ„æºç¼“å­˜7200ç§’ï¼Œ7200ç§’ä»¥å†…çš„æ‰€æœ‰æ­¤èµ„æºè®¿é—®ä¸ç”¨å‘ç»™æœåŠ¡å™¨è¯·æ±‚ï¼Œ7200ç§’ä»¥åå‘è¯·æ±‚ç»™æœåŠ¡å™¨</span>
<span class="token key attr-name">spring.web.resources.cache.cachecontrol.max-age</span><span class="token punctuation">=</span><span class="token value attr-value">7200</span>
<span class="token comment">## å…±äº«ç¼“å­˜</span>
<span class="token key attr-name">spring.web.resources.cache.cachecontrol.cache-public</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token comment">#ä½¿ç”¨èµ„æº last-modified æ—¶é—´ï¼Œæ¥å¯¹æ¯”æœåŠ¡å™¨å’Œæµè§ˆå™¨çš„èµ„æºæ˜¯å¦ç›¸åŒæ²¡æœ‰å˜åŒ–ã€‚ç›¸åŒè¿”å› 304</span>
<span class="token key attr-name">spring.web.resources.cache.use-last-modified</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>

<span class="token comment">#è‡ªå®šä¹‰é™æ€èµ„æºæ–‡ä»¶å¤¹ä½ç½®</span>
<span class="token key attr-name">spring.web.resources.static-locations</span><span class="token punctuation">=</span><span class="token value attr-value">classpath:/a/,classpath:/b/,classpath:/static/</span>

<span class="token comment">#2ã€ spring.mvc</span>
<span class="token comment">## 2.1. è‡ªå®šä¹‰webjarsè·¯å¾„å‰ç¼€</span>
<span class="token key attr-name">spring.mvc.webjars-path-pattern</span><span class="token punctuation">=</span><span class="token value attr-value">/wj/**</span>
<span class="token comment">## 2.2. é™æ€èµ„æºè®¿é—®è·¯å¾„å‰ç¼€</span>
<span class="token key attr-name">spring.mvc.static-path-pattern</span><span class="token punctuation">=</span><span class="token value attr-value">/static/**</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä»£ç æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#ä»£ç æ–¹å¼" aria-hidden="true">#</a> ä»£ç æ–¹å¼</h4><ul><li>å®¹å™¨ä¸­åªè¦æœ‰ä¸€ä¸ª WebMvcConfigurer ç»„ä»¶ã€‚é…ç½®çš„åº•å±‚è¡Œä¸ºéƒ½ä¼šç”Ÿæ•ˆ</li><li>@EnableWebMvc //ç¦ç”¨bootçš„é»˜è®¤é…ç½®</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span> <span class="token comment">//è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//ä¿ç•™ä»¥å‰è§„åˆ™</span>
        <span class="token comment">//è‡ªå·±å†™æ–°çš„è§„åˆ™ã€‚</span>
        registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/static/**&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:/a/&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;classpath:/b/&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setCacheControl</span><span class="token punctuation">(</span><span class="token class-name">CacheControl</span><span class="token punctuation">.</span><span class="token function">maxAge</span><span class="token punctuation">(</span><span class="token number">1180</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>éç»§æ‰¿æ–¹å¼</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span> <span class="token comment">//è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»,ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª WebMvcConfigurer ç»„ä»¶ï¼Œå°±èƒ½è‡ªå®šä¹‰åº•å±‚</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span>  <span class="token comment">/*implements WebMvcConfigurer*/</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token function">webMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/static/**&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:/a/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;classpath:/b/&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">setCacheControl</span><span class="token punctuation">(</span><span class="token class-name">CacheControl</span><span class="token punctuation">.</span><span class="token function">maxAge</span><span class="token punctuation">(</span><span class="token number">1180</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ä¸ºä»€ä¹ˆä¸ºå®¹å™¨æ·»åŠ ä¸€ä¸ª WebMvcConfigurer å°±å¯ä»¥è‡ªå®šä¹‰åº•å±‚ï¼Ÿ</p><p>æˆ‘ä»¬é…ç½®çš„ WebMvcConfigurer æœ€ç»ˆæ˜¯åœ¨ä»€ä¹ˆåœ°æ–¹è°ƒç”¨ï¼Ÿ</p></blockquote><ul><li><code>EnableWebMvcConfiguration</code> ç±»åœ¨åŠ è½½æ—¶ï¼Œå…¶çˆ¶ç±» <code>DelegatingWebMvcConfiguration</code> ä¹Ÿä¼šè¢«åŠ è½½ã€‚</li><li><code>DelegatingWebMvcConfiguration</code> ä¸­å­˜åœ¨å¦‚ä¸‹æ–¹æ³•ï¼Œä¼šå°†æ‰€æœ‰çš„<code>WebMVCConfiguration</code>ï¼ŒåŠ å…¥ <code>WebMvcConfigurerComposite</code>ä¸­çš„<code>List</code>ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">WebMvcConfigurerComposite</span> configurers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebMvcConfigurerComposite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Autowired</span><span class="token punctuation">(</span>
    required <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setConfigurers</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">&gt;</span></span> configurers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>configurers<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>configurers<span class="token punctuation">.</span><span class="token function">addWebMvcConfigurers</span><span class="token punctuation">(</span>configurers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>DelegatingWebMvcConfiguration</code>è°ƒç”¨ <code>WebMvcConfigurerComposite</code> æä¾›çš„å„ç§æ–¹æ³•ï¼Œè°ƒç”¨æ‰€æœ‰ <code>WebMVCConfiguration</code> å­ç±»çš„å®ç°ã€‚å¦‚ä¸‹ï¼šåªè¦æˆ‘ä»¬é…ç½®äº† <code>WebMCVconfiguration</code>ï¼Œå¹¶ä¸”é‡å†™äº†å…¶ä¸­çš„æ–¹æ³•ï¼Œ<strong>æ³¨æ„ç‚¹ 1</strong>æœ€ç»ˆä¼šè°ƒç”¨é‡å†™çš„æ–¹æ³•ã€‚å®Œæˆè‡ªå®šä¹‰çš„é…ç½®ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcConfigurerComposite</span><span class="token punctuation">{</span>
    <span class="token comment">/* çœç•¥å…¶ä»–æ–¹æ³• */</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">WebMvcConfigurer</span> delegate <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>delegates<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			delegate<span class="token punctuation">.</span><span class="token function">addResourceHandlers</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// æ³¨æ„ç‚¹ 1</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>    
    <span class="token comment">/* çœç•¥å…¶ä»–æ–¹æ³• */</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è·¯å¾„åŒ¹é…" tabindex="-1"><a class="header-anchor" href="#è·¯å¾„åŒ¹é…" aria-hidden="true">#</a> è·¯å¾„åŒ¹é…</h2><p><strong>Spring5.3</strong> ä¹‹ååŠ å…¥äº†æ›´å¤šçš„è¯·æ±‚è·¯å¾„åŒ¹é…çš„å®ç°ç­–ç•¥ï¼›</p><p>ä»¥å‰åªæ”¯æŒ <code>AntPathMatcher</code> ç­–ç•¥, ç°åœ¨æä¾›äº† <strong>PathPatternParser</strong> ç­–ç•¥ã€‚å¹¶ä¸”å¯ä»¥è®©æˆ‘ä»¬æŒ‡å®šåˆ°åº•ä½¿ç”¨é‚£ç§ç­–ç•¥ã€‚</p><h3 id="anté£æ ¼è·¯å¾„ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#anté£æ ¼è·¯å¾„ç”¨æ³•" aria-hidden="true">#</a> Anté£æ ¼è·¯å¾„ç”¨æ³•</h3><p>Ant é£æ ¼çš„è·¯å¾„æ¨¡å¼è¯­æ³•å…·æœ‰ä»¥ä¸‹è§„åˆ™ï¼š</p><ul><li>*ï¼šè¡¨ç¤º<strong>ä»»æ„æ•°é‡</strong>çš„å­—ç¬¦ã€‚</li><li>?ï¼šè¡¨ç¤ºä»»æ„<strong>ä¸€ä¸ªå­—ç¬¦</strong>ã€‚</li><li>**ï¼šè¡¨ç¤ºä»»æ„æ•°é‡çš„ç›®å½•ã€‚</li><li>{}ï¼šè¡¨ç¤ºä¸€ä¸ªå‘½åçš„æ¨¡å¼<strong>å ä½ç¬¦</strong>ã€‚</li><li>[]ï¼šè¡¨ç¤º<strong>å­—ç¬¦é›†åˆ</strong>ï¼Œä¾‹å¦‚[a-z]è¡¨ç¤ºå°å†™å­—æ¯ã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><ul><li><code>*.html</code> åŒ¹é…ä»»æ„åç§°ï¼Œæ‰©å±•åä¸º<code>.html</code>çš„æ–‡ä»¶ã€‚</li><li><code>/folder1/*/*.java</code> åŒ¹é…åœ¨<code>folder1</code>ç›®å½•ä¸‹çš„ä»»æ„ä¸¤çº§ç›®å½•ä¸‹çš„<code>.java</code>æ–‡ä»¶ã€‚</li><li><code>/folder2/**/*.jsp</code> åŒ¹é…åœ¨<code>folder2</code>ç›®å½•ä¸‹ä»»æ„ç›®å½•æ·±åº¦çš„<code>.jsp</code>æ–‡ä»¶ã€‚</li><li><code>/{type}/{id}.html</code> åŒ¹é…ä»»æ„æ–‡ä»¶åä¸º{id}.htmlï¼Œåœ¨ä»»æ„å‘½åçš„<code>{type}</code>ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚</li></ul><p>æ³¨æ„ï¼šAnt é£æ ¼çš„è·¯å¾„æ¨¡å¼è¯­æ³•ä¸­çš„ç‰¹æ®Šå­—ç¬¦éœ€è¦è½¬ä¹‰ï¼Œå¦‚ï¼š</p><ul><li>è¦åŒ¹é…æ–‡ä»¶è·¯å¾„ä¸­çš„æ˜Ÿå·ï¼Œåˆ™éœ€è¦è½¬ä¹‰ä¸º\*ã€‚</li><li>è¦åŒ¹é…æ–‡ä»¶è·¯å¾„ä¸­çš„é—®å·ï¼Œåˆ™éœ€è¦è½¬ä¹‰ä¸º\?ã€‚</li></ul><h3 id="æ¨¡å¼åˆ‡æ¢" tabindex="-1"><a class="header-anchor" href="#æ¨¡å¼åˆ‡æ¢" aria-hidden="true">#</a> æ¨¡å¼åˆ‡æ¢</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>AntPathMatcher ä¸ PathPatternParser
â— PathPatternParser åœ¨ jmh åŸºå‡†æµ‹è¯•ä¸‹ï¼Œæœ‰ 6~8 å€ååé‡æå‡ï¼Œé™ä½ 30%~40%ç©ºé—´åˆ†é…ç‡
â— PathPatternParser å…¼å®¹ AntPathMatcherè¯­æ³•ï¼Œå¹¶æ”¯æŒæ›´å¤šç±»å‹çš„è·¯å¾„æ¨¡å¼
â— PathPatternParser  &quot;**&quot; å¤šæ®µåŒ¹é…çš„æ”¯æŒä»…å…è®¸åœ¨æ¨¡å¼æœ«å°¾ä½¿ç”¨
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
     * a* è¡¨ç¤ºä»¥aå¼€å¤´ï¼Œåé¢ä»»æ„å¤šä¸ªå­—ç¬¦ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰
     * b? è¡¨ç¤ºä»¥bå¼€å¤´ï¼Œåé¢è·Ÿä¸€ä¸ªå­—ç¬¦
     * <span class="token punctuation">{</span>p1:[z-f]+<span class="token punctuation">}</span> ä»£è¡¨ï¼Œa-f ä¸­çš„å­—ç¬¦è‡³å°‘æœ‰ä¸€ä¸ªä»¥ä¸Šï¼Œä¸èƒ½æ²¡æœ‰ï¼Œä¸”ä¸èƒ½è¶…èŒƒå›´
     * <span class="token keyword">@param</span> <span class="token parameter">request</span>
     * <span class="token keyword">@param</span> <span class="token parameter">path</span>
     * <span class="token keyword">@return</span>
     */</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/a*/b?/{p1:[a-f]+}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;p1&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è·¯å¾„å˜é‡p1ï¼š {}&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è·å–è¯·æ±‚è·¯å¾„</span>
    <span class="token class-name">String</span> uri <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> uri<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€»ç»“ï¼š</p><ul><li>ä½¿ç”¨é»˜è®¤çš„è·¯å¾„åŒ¹é…è§„åˆ™ï¼Œæ˜¯ç”± <code>PathPatternParser</code> æä¾›çš„</li><li>å¦‚æœè·¯å¾„ä¸­é—´éœ€è¦æœ‰ <code>**</code>ï¼Œæ›¿æ¢æˆ<code>ant</code>é£æ ¼è·¯å¾„ã€‚</li></ul><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># æ”¹å˜è·¯å¾„åŒ¹é…ç­–ç•¥ï¼š</span>
<span class="token comment"># ant_path_matcher è€ç‰ˆç­–ç•¥ï¼›</span>
<span class="token comment"># path_pattern_parser æ–°ç‰ˆç­–ç•¥ï¼›</span>
<span class="token key attr-name">spring.mvc.pathmatch.matching-strategy</span><span class="token punctuation">=</span><span class="token value attr-value">ant_path_matcher</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥æŸ¥çœ‹é…ç½®æ˜¯å¦‚ä½•ç”Ÿæ•ˆã€‚å‰ç¼€ä¸º <code>spring.mvc</code>ï¼Œé‚£ä¹ˆè¯¥é…ç½®å°±åœ¨ <code>WebMvcProperties</code> ä¸­ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// WebMvcAutoConfigurationAdapter.java</span>
<span class="token comment">// ç”±äºé»˜è®¤æ”¯æŒ  path_pattern_parser</span>
<span class="token comment">// è¿™é‡Œåªéœ€è¦åˆ¤æ–­æ˜¯å¦é…ç½®äº†  ANT_PATH_MATCHER</span>
<span class="token annotation punctuation">@Override</span> 
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configurePathMatch</span><span class="token punctuation">(</span><span class="token class-name">PathMatchConfigurer</span> configurer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getPathmatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">getMatchingStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">WebMvcProperties<span class="token punctuation">.</span>MatchingStrategy</span><span class="token punctuation">.</span><span class="token constant">ANT_PATH_MATCHER</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        configurer<span class="token punctuation">.</span><span class="token function">setPathMatcher</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AntPathMatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dispatcherServletPath<span class="token punctuation">.</span><span class="token function">ifAvailable</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dispatcherPath<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> servletUrlMapping <span class="token operator">=</span> dispatcherPath<span class="token punctuation">.</span><span class="token function">getServletUrlMapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>servletUrlMapping<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">singleDispatcherServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">UrlPathHelper</span> urlPathHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlPathHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                urlPathHelper<span class="token punctuation">.</span><span class="token function">setAlwaysUseFullPath</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                configurer<span class="token punctuation">.</span><span class="token function">setUrlPathHelper</span><span class="token punctuation">(</span>urlPathHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å†…å®¹åå•†" tabindex="-1"><a class="header-anchor" href="#å†…å®¹åå•†" aria-hidden="true">#</a> å†…å®¹åå•†</h2><p>æˆ‘ä»¬è¿›è¡Œ<code>web</code>å¼€å‘æ—¶ï¼Œç°åœ¨ä¸€èˆ¬éƒ½æ˜¯è®¾è®¡æˆ<code>RESTful</code>é£æ ¼çš„<code>url</code>ã€‚å¦‚æœæ­¤æ—¶æˆ‘ä»¬å¸Œæœ›åœ¨è¯·æ±‚åŒä¸€ä¸ª<code>RESTful</code>çš„URLæ—¶ï¼Œå¾—åˆ°ä¸åŒçš„PDFè§†å›¾ã€<code>JSON</code>è§†å›¾ã€<code>Html</code>è§†å›¾ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦å¯¹åŒä¸€ä¸ª<code>url</code>è¿”å›å¤šç§ä¸åŒçš„ç»“æœï¼Œè¿™è¯¥å¦‚ä½•å®ç°ï¼Ÿ</p><blockquote><p>ä¸€å¥—ç³»ç»Ÿé€‚é…<strong>å¤šç«¯æ•°æ®</strong>è¿”å›ã€‚</p></blockquote><figure><img src="/blog-notes/dist/assets/1681217799861-dde49224-a767-489b-80b7-7d8d503e33cf-ac5edfb9.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h3 id="å¤šç«¯å†…å®¹é€‚é…" tabindex="-1"><a class="header-anchor" href="#å¤šç«¯å†…å®¹é€‚é…" aria-hidden="true">#</a> å¤šç«¯å†…å®¹é€‚é…</h3><h4 id="é»˜è®¤è§„åˆ™-1" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤è§„åˆ™-1" aria-hidden="true">#</a> é»˜è®¤è§„åˆ™</h4><ul><li><p>åŸºäºè¯·æ±‚å¤´çš„å†…å®¹åå•†ï¼ˆé»˜è®¤å¼€å¯ï¼‰</p><ul><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œæºå¸¦HTTPæ ‡å‡†çš„<strong>Acceptè¯·æ±‚å¤´</strong>ã€‚</li><li>Accept: <code>application/jsonã€text/xmlã€text/yaml</code></li><li>æœåŠ¡ç«¯æ ¹æ®å®¢æˆ·ç«¯<strong>è¯·æ±‚å¤´æœŸæœ›çš„æ•°æ®ç±»å‹</strong>è¿›è¡Œ<strong>åŠ¨æ€è¿”å›</strong></li></ul></li><li><p>åŸºäº<strong>è¯·æ±‚å‚æ•°</strong>å†…å®¹åå•†ï¼šï¼ˆéœ€è¦å¼€å¯ï¼‰</p><ul><li>å‘é€è¯·æ±‚ <code>GET /projects/spring-boot?format=json</code></li><li>åŒ¹é…åˆ° <code>@GetMapping(&quot;/projects/spring-boot&quot;)</code></li><li>æ ¹æ®å‚æ•°åå•†ï¼Œä¼˜å…ˆè¿”å› <code>json</code> ç±»å‹æ•°æ®ã€éœ€è¦å¼€å¯å‚æ•°åŒ¹é…è®¾ç½®ã€‘</li><li>å‘é€è¯·æ±‚ <code>GET /projects/spring-boot?format=xml,</code>ä¼˜å…ˆè¿”å› <code>xml</code> ç±»å‹æ•°æ®</li></ul></li></ul><h4 id="æ•ˆæœæ¼”ç¤º" tabindex="-1"><a class="header-anchor" href="#æ•ˆæœæ¼”ç¤º" aria-hidden="true">#</a> æ•ˆæœæ¼”ç¤º</h4><p>è¯·æ±‚åŒä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥è¿”å›jsonå’Œxmlä¸åŒæ ¼å¼æ•°æ®</p><ul><li>åŠ å…¥ä¾èµ–</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.dataformat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-dataformat-xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¼€å¯é…ç½®</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span> 
  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">contentnegotiation</span><span class="token punctuation">:</span>
      <span class="token comment"># æ˜¯å¦åº”è¯¥ä½¿ç”¨è¯·æ±‚å‚æ•°æ¥ç¡®å®šè¯·æ±‚çš„ media type ï¼ˆé»˜è®¤ falseï¼‰</span>
      <span class="token key atrule">favor-parameter</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// get: /demo02?format=json</span>
<span class="token comment">// get: /demo02?format=xml</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/demo02&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">controllerTest02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;å°æ˜&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> student<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç»“æœ</li></ul><figure><img src="/blog-notes/dist/assets/image-20230720153732111-78ac28d9.png" alt="image-20230720153732111" tabindex="0" loading="lazy"><figcaption>image-20230720153732111</figcaption></figure><h4 id="é…ç½®åå•†è§„åˆ™ä¸æ”¯æŒç±»å‹" tabindex="-1"><a class="header-anchor" href="#é…ç½®åå•†è§„åˆ™ä¸æ”¯æŒç±»å‹" aria-hidden="true">#</a> é…ç½®åå•†è§„åˆ™ä¸æ”¯æŒç±»å‹</h4><ol><li>ä¿®æ”¹<strong>å†…å®¹åå•†æ–¹å¼</strong></li></ol><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment">#ä½¿ç”¨å‚æ•°è¿›è¡Œå†…å®¹åå•†</span>
<span class="token key attr-name">spring.mvc.contentnegotiation.favor-parameter</span><span class="token punctuation">=</span><span class="token value attr-value">true  </span>
<span class="token comment">#è‡ªå®šä¹‰å‚æ•°åï¼Œé»˜è®¤ä¸ºformat</span>
<span class="token key attr-name">spring.mvc.contentnegotiation.parameter-name</span><span class="token punctuation">=</span><span class="token value attr-value">myparam </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>å¤§å¤šæ•° MediaType éƒ½æ˜¯å¼€ç®±å³ç”¨çš„ã€‚ä¹Ÿå¯ä»¥<strong>è‡ªå®šä¹‰å†…å®¹ç±»å‹ï¼Œå¦‚ï¼š</strong></li></ol><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.mvc.contentnegotiation.media-types.yaml</span><span class="token punctuation">=</span><span class="token value attr-value">text/yaml</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="è‡ªå®šä¹‰å†…å®¹è¿”å›" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰å†…å®¹è¿”å›" aria-hidden="true">#</a> è‡ªå®šä¹‰å†…å®¹è¿”å›</h3><h4 id="å¢åŠ yamlè¿”å›æ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#å¢åŠ yamlè¿”å›æ”¯æŒ" aria-hidden="true">#</a> å¢åŠ yamlè¿”å›æ”¯æŒ</h4><ul><li>å¯¼å…¥ä¾èµ–</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.dataformat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-dataformat-yaml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æŠŠå¯¹è±¡å†™å‡ºæˆYAML</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/demo03&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">controllerTest03</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{</span>
    <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;å°æ˜&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">YAMLFactory</span> yamlFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YAMLFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token class-name">YAMLGenerator<span class="token punctuation">.</span>Feature</span><span class="token punctuation">.</span><span class="token constant">WRITE_DOC_START_MARKER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span>yamlFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> s <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç¼–å†™é…ç½®</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code>  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">contentnegotiation</span><span class="token punctuation">:</span>
      <span class="token comment"># æ˜¯å¦åº”è¯¥ä½¿ç”¨è¯·æ±‚å‚æ•°æ¥ç¡®å®šè¯·æ±‚çš„ media type ï¼ˆé»˜è®¤ falseï¼‰</span>
      <span class="token key atrule">favor-parameter</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">media-types</span><span class="token punctuation">:</span>
        <span class="token key atrule">yaml</span><span class="token punctuation">:</span> <span class="token string">&quot;text/yaml&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è‡ªå®šä¹‰ä¸€ä¸ª <code>YamlMessageConverter</code> ç»„ä»¶</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyYamlMessageConverter</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractHttpMessageConverter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">ObjectMapper</span> objectMapper<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">supports</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// åˆ¤æ–­æ˜¯å¦å¯ä»¥æ”¯æŒè½¬ä¸º Yaml ï¼Œ</span>
        <span class="token comment">// ä¸€èˆ¬é™¤äº†åŸºæœ¬ç±»å‹éƒ½å¯ä»¥è½¬ï¼Œ</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token class-name">MyYamlMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// æŒ‡å®š MyYamlMessageConverter æ”¯æŒçš„ yaml ç±»å‹</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MediaType</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;yaml&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;å¼€å§‹åˆå§‹åŒ–ï¼Œå¹¶è®¾ç½® text/yaml æˆåŠŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">YAMLFactory</span> yamlFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YAMLFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token class-name">YAMLGenerator<span class="token punctuation">.</span>Feature</span><span class="token punctuation">.</span><span class="token constant">WRITE_DOC_START_MARKER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span>yamlFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;å®Œæˆåˆå§‹åŒ–&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>  <span class="token comment">// ç”¨äºæµè§ˆå™¨ä¼ åˆ°åç«¯çš„å¯¹è±¡è§£æ è¾…åŠ© @RequestBody</span>
    <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">readInternal</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">,</span> <span class="token class-name">HttpInputMessage</span> inputMessage<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">HttpMessageNotReadableException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    
    <span class="token annotation punctuation">@Override</span>  <span class="token comment">// ç”¨äºåç«¯å¯¹è±¡è§£æä¼ é€’åˆ°å‰ç«¯ è¾…åŠ© @ResponseBody</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">writeInternal</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">,</span> <span class="token class-name">HttpOutputMessage</span> outputMessage<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">HttpMessageNotWritableException</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;å¼€å§‹å°†å¯¹è±¡{}ï¼Œè½¬æ¢ä¸ºyaml&quot;</span><span class="token punctuation">,</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span><span class="token punctuation">(</span><span class="token class-name">OutputStream</span> out <span class="token operator">=</span> outputMessage<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>objectMapper<span class="token punctuation">.</span><span class="token function">writeValue</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;è½¬æ¢å®Œæˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é…ç½®ä¸€ä¸ª<code>WebMvcConfigurer</code>ç”¨æ¥å¢åŠ <code>MyYamlMessageConverter</code>ç»„ä»¶ï¼Œä¸“é—¨è´Ÿè´£æŠŠå¯¹è±¡å†™å‡ºä¸ºyamlæ ¼å¼ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BaseConfiguration</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token function">webMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureMessageConverters</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HttpMessageConverter</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> converters<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                converters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyYamlMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>controller</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// get: /demo03?format=yaml</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/demo02&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">controllerTest02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{</span>
    <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;å°æ˜&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> student<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç»“æœ</li></ul><figure><img src="/blog-notes/dist/assets/image-20230720172757271-4796f940.png" alt="image-20230720172757271" tabindex="0" loading="lazy"><figcaption>image-20230720172757271</figcaption></figure><h4 id="æ€è€ƒ-å¦‚ä½•å¢åŠ å…¶ä»–" tabindex="-1"><a class="header-anchor" href="#æ€è€ƒ-å¦‚ä½•å¢åŠ å…¶ä»–" aria-hidden="true">#</a> æ€è€ƒï¼šå¦‚ä½•å¢åŠ å…¶ä»–</h4><ul><li><p>é…ç½®åª’ä½“ç±»å‹æ”¯æŒ:</p></li><li><ul><li><code>spring.mvc.contentnegotiation.media-types.yaml=text/yaml</code></li></ul></li><li><p>ç¼–å†™å¯¹åº”çš„<code>HttpMessageConverter</code>ï¼Œè¦å‘Šè¯‰Bootè¿™ä¸ªæ”¯æŒçš„åª’ä½“ç±»å‹</p></li><li><ul><li>æŒ‰ç…§ä¸Šé¢çš„ç¤ºä¾‹</li></ul></li><li><p>æŠŠ<code>MessageConverter</code>ç»„ä»¶åŠ å…¥åˆ°åº•å±‚</p></li><li><ul><li>å®¹å™¨ä¸­æ”¾ä¸€ä¸ª<code>WebMvcConfigurer</code> ç»„ä»¶ï¼Œå¹¶é…ç½®åº•å±‚çš„<code>MessageConverter</code></li></ul></li></ul><h4 id="httpmessageconverterçš„ç¤ºä¾‹å†™æ³•" tabindex="-1"><a class="header-anchor" href="#httpmessageconverterçš„ç¤ºä¾‹å†™æ³•" aria-hidden="true">#</a> HttpMessageConverterçš„ç¤ºä¾‹å†™æ³•</h4><ul><li>å‚è€ƒä¸Šè¿°ä¾‹å­</li></ul><h3 id="å†…å®¹åå•†åŸç†-httpmessageconverter" tabindex="-1"><a class="header-anchor" href="#å†…å®¹åå•†åŸç†-httpmessageconverter" aria-hidden="true">#</a> å†…å®¹åå•†åŸç†-<code>HttpMessageConverter</code></h3><blockquote><p><code>HttpMessageConverter</code> æ€ä¹ˆå·¥ä½œï¼Ÿåˆé€‚å·¥ä½œï¼Ÿ</p><p>å®šåˆ¶ <code>HttpMessageConverter</code> æ¥å®ç°å¤šç«¯å†…å®¹åå•†</p><p>ç¼–å†™<code>WebMvcConfigurer</code>æä¾›çš„<code>configureMessageConverters</code>åº•å±‚ï¼Œä¿®æ”¹åº•å±‚çš„<code>MessageConverter</code></p></blockquote><h4 id="_1-responsebodyç”±httpmessageconverterå¤„ç†" tabindex="-1"><a class="header-anchor" href="#_1-responsebodyç”±httpmessageconverterå¤„ç†" aria-hidden="true">#</a> 1.<code>@ResponseBody</code>ç”±<code>HttpMessageConverter</code>å¤„ç†</h4><p>æ ‡æ³¨äº†<code>@ResponseBody</code>çš„è¿”å›å€¼ å°†ä¼šç”±æ”¯æŒå®ƒçš„ <code>HttpMessageConverter</code>å†™ç»™æµè§ˆå™¨</p><ol><li><p>å¦‚æœ<code>controller</code>æ–¹æ³•çš„è¿”å›å€¼æ ‡æ³¨äº† <code>@ResponseBody </code>æ³¨è§£</p></li><li><ol><li>è¯·æ±‚è¿›æ¥å…ˆæ¥åˆ°<code>DispatcherServlet</code>çš„<code>doDispatch()</code>è¿›è¡Œå¤„ç†</li><li>æ‰¾åˆ°ä¸€ä¸ª <code>HandlerAdapter </code>é€‚é…å™¨ã€‚åˆ©ç”¨é€‚é…å™¨æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li><code>RequestMappingHandlerAdapter</code>æ¥æ‰§è¡Œï¼Œè°ƒç”¨<code>invokeHandlerMethodï¼ˆï¼‰</code>æ¥æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li>ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œå‡†å¤‡å¥½ä¸¤ä¸ªä¸œè¥¿</li></ol></li><li><ol><li><ol><li><code>HandlerMethodArgumentResolver</code>ï¼šå‚æ•°è§£æå™¨ï¼Œç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸ªå‚æ•°å€¼</li><li><code>HandlerMethodReturnValueHandler</code>ï¼šè¿”å›å€¼å¤„ç†å™¨ï¼Œç¡®å®šç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼è¦æ€ä¹ˆå¤„ç†</li></ol></li></ol></li><li><ol start="5"><li><code>RequestMappingHandlerAdapter</code> é‡Œé¢çš„<code>invokeAndHandle()</code>çœŸæ­£æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li>ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œä¼šè¿”å›<strong>è¿”å›å€¼å¯¹è±¡</strong></li><li>æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„è¿”å›å€¼å¤„ç†å™¨ <code>HandlerMethodReturnValueHandler</code></li><li>æœ€ç»ˆæ‰¾åˆ° <code>RequestResponseBodyMethodProcessor</code>èƒ½å¤„ç† æ ‡æ³¨äº† <code>@ResponseBody</code>æ³¨è§£çš„æ–¹æ³•</li><li><code>RequestResponseBodyMethodProcessor</code> è°ƒç”¨<code>writeWithMessageConverters </code>,åˆ©ç”¨<code>MessageConverter</code>æŠŠè¿”å›å€¼å†™å‡ºå»</li></ol></li></ol><p>ä¸Šé¢è§£é‡Šï¼š<code>@ResponseBody</code>ç”±<code>HttpMessageConverter</code>å¤„ç†</p><ol><li><p><code>HttpMessageConverter</code> ä¼š<strong>å…ˆè¿›è¡Œå†…å®¹åå•†</strong></p></li><li><ol><li>éå†æ‰€æœ‰çš„<code>MessageConverter</code>çœ‹è°æ”¯æŒè¿™ç§<strong>å†…å®¹ç±»å‹çš„æ•°æ®</strong></li><li>é»˜è®¤<code>MessageConverter</code>æœ‰ä»¥ä¸‹</li></ol></li><li><figure><img src="/blog-notes/dist/assets/1681275459547-89d8d651-b52f-4d47-bff9-6db123624424-8bc68a21.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure></li><li><ol><li>æœ€ç»ˆå› ä¸ºè¦<code>json</code>æ‰€ä»¥<code>MappingJackson2HttpMessageConverter</code>æ”¯æŒå†™å‡ºjson</li><li>jacksonç”¨<code>ObjectMapper</code>æŠŠå¯¹è±¡å†™å‡ºå»</li></ol></li></ol><h4 id="_2-webmvcautoconfigurationæä¾›å‡ ç§é»˜è®¤httpmessageconverters" tabindex="-1"><a class="header-anchor" href="#_2-webmvcautoconfigurationæä¾›å‡ ç§é»˜è®¤httpmessageconverters" aria-hidden="true">#</a> 2. <code>WebMvcAutoConfiguration</code>æä¾›å‡ ç§é»˜è®¤<code>HttpMessageConverters</code></h4><ul><li><p><code>EnableWebMvcConfiguration</code>é€šè¿‡ <code>addDefaultHttpMessageConverters</code>æ·»åŠ äº†é»˜è®¤çš„<code>MessageConverter</code>ï¼›å¦‚ä¸‹ï¼š</p></li><li><ul><li><code>ByteArrayHttpMessageConverter</code>ï¼š æ”¯æŒå­—èŠ‚æ•°æ®è¯»å†™</li><li><code>StringHttpMessageConverter</code>ï¼š æ”¯æŒå­—ç¬¦ä¸²è¯»å†™</li><li><code>ResourceHttpMessageConverter</code>ï¼šæ”¯æŒèµ„æºè¯»å†™</li><li><code>ResourceRegionHttpMessageConverter</code>: æ”¯æŒåˆ†åŒºèµ„æºå†™å‡º</li><li><code>AllEncompassingFormHttpMessageConverter</code>ï¼šæ”¯æŒè¡¨å•xml/jsonè¯»å†™</li><li><code>MappingJackson2HttpMessageConverter</code>ï¼š æ”¯æŒè¯·æ±‚å“åº”ä½“Jsonè¯»å†™</li></ul></li></ul><figure><img src="/blog-notes/dist/assets/1681302411019-0c0425aa-6679-4b2b-a456-b31c151c6e83-58e6e042.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>ç³»ç»Ÿæä¾›é»˜è®¤çš„<code>MessageConverter</code> åŠŸèƒ½æœ‰é™ï¼Œä»…ç”¨äº<code>json</code>æˆ–è€…æ™®é€šè¿”å›æ•°æ®ã€‚é¢å¤–å¢åŠ æ–°çš„å†…å®¹åå•†åŠŸèƒ½ï¼Œå¿…é¡»å¢åŠ æ–°çš„<code>HttpMessageConverter</code></p><h3 id="å‚è€ƒ" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒ" aria-hidden="true">#</a> å‚è€ƒ</h3><ul><li><a href="https://www.yuque.com/leifengyang/springboot3/wp5l9qbu1k64frz1#v1tQl" target="_blank" rel="noopener noreferrer">https://www.yuque.com/leifengyang/springboot3/wp5l9qbu1k64frz1#v1tQl<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://zhuanlan.zhihu.com/p/115891808" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/115891808<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="é”™è¯¯å¤„ç†" tabindex="-1"><a class="header-anchor" href="#é”™è¯¯å¤„ç†" aria-hidden="true">#</a> é”™è¯¯å¤„ç†</h2><h3 id="é»˜è®¤æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤æœºåˆ¶" aria-hidden="true">#</a> é»˜è®¤æœºåˆ¶</h3><p><strong>é”™è¯¯å¤„ç†çš„è‡ªåŠ¨é…ç½®</strong>éƒ½åœ¨<code>ErrorMvcAutoConfiguration</code>ä¸­ï¼Œä¸¤å¤§æ ¸å¿ƒæœºåˆ¶ï¼š</p><ol><li>SpringBoot ä¼š<strong>è‡ªé€‚åº”</strong>å¤„ç†é”™è¯¯ï¼Œå“åº”é¡µé¢æˆ–<code>JSON</code>æ•°æ®</li><li><strong>SpringMVCçš„é”™è¯¯å¤„ç†æœºåˆ¶</strong>ä¾ç„¶ä¿ç•™ï¼Œ<strong>MVCå¤„ç†ä¸äº†</strong>ï¼Œæ‰ä¼š<strong>äº¤ç»™bootè¿›è¡Œå¤„ç†</strong></li></ol><figure><img src="/blog-notes/dist/assets/Snipaste_2023-07-20_20-45-08-04dfe090.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><code>server.error</code> åŒ…å«çš„é…ç½®ã€‚</p><figure><img src="/blog-notes/dist/assets/image-20230720201827187-b25a7d54.png" alt="image-20230720201827187" tabindex="0" loading="lazy"><figcaption>image-20230720201827187</figcaption></figure><ul><li>å‘ç”Ÿé”™è¯¯ä»¥åï¼Œè½¬å‘ç»™/errorè·¯å¾„ï¼ŒSpringBootåœ¨åº•å±‚å†™å¥½ä¸€ä¸ª BasicErrorControllerçš„ç»„ä»¶ï¼Œä¸“é—¨å¤„ç†è¿™ä¸ªè¯·æ±‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>produces <span class="token operator">=</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">TEXT_HTML_VALUE</span><span class="token punctuation">)</span> <span class="token comment">//è¿”å›HTML</span>
<span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">errorHtml</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">HttpStatus</span> status <span class="token operator">=</span> <span class="token function">getStatus</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model <span class="token operator">=</span> <span class="token class-name">Collections</span>
        <span class="token punctuation">.</span><span class="token function">unmodifiableMap</span><span class="token punctuation">(</span><span class="token function">getErrorAttributes</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token function">getErrorAttributeOptions</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">TEXT_HTML</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ModelAndView</span> modelAndView <span class="token operator">=</span> <span class="token function">resolveErrorView</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> status<span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>modelAndView <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> modelAndView <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@RequestMapping</span>  <span class="token comment">//è¿”å› ResponseEntity, JSON</span>
<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">HttpStatus</span> status <span class="token operator">=</span> <span class="token function">getStatus</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NO_CONTENT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> body <span class="token operator">=</span> <span class="token function">getErrorAttributes</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token function">getErrorAttributeOptions</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">ALL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é”™è¯¯é¡µé¢æ˜¯è¿™ä¹ˆè§£æåˆ°çš„</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//1ã€è§£æé”™è¯¯çš„è‡ªå®šä¹‰è§†å›¾åœ°å€</span>
<span class="token class-name">ModelAndView</span> modelAndView <span class="token operator">=</span> <span class="token function">resolveErrorView</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> status<span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2ã€å¦‚æœè§£æä¸åˆ°é”™è¯¯é¡µé¢çš„åœ°å€ï¼Œé»˜è®¤çš„é”™è¯¯é¡µå°±æ˜¯ error</span>
<span class="token keyword">return</span> <span class="token punctuation">(</span>modelAndView <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> modelAndView <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å®¹å™¨ä¸­ä¸“é—¨æœ‰ä¸€ä¸ªé”™è¯¯è§†å›¾è§£æå™¨</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConditionalOnBean</span><span class="token punctuation">(</span><span class="token class-name">DispatcherServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">ErrorViewResolver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token class-name">DefaultErrorViewResolver</span> <span class="token function">conventionErrorViewResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DefaultErrorViewResolver</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resources<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>SpringBootè§£æè‡ªå®šä¹‰é”™è¯¯é¡µçš„é»˜è®¤è§„åˆ™</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">resolveErrorView</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span> status<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ModelAndView</span> modelAndView <span class="token operator">=</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>modelAndView <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">SERIES_VIEWS</span><span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        modelAndView <span class="token operator">=</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token constant">SERIES_VIEWS</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">ModelAndView</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token class-name">String</span> viewName<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> errorViewName <span class="token operator">=</span> <span class="token string">&quot;error/&quot;</span> <span class="token operator">+</span> viewName<span class="token punctuation">;</span>
    <span class="token class-name">TemplateAvailabilityProvider</span> provider <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>templateAvailabilityProviders<span class="token punctuation">.</span><span class="token function">getProvider</span><span class="token punctuation">(</span>errorViewName<span class="token punctuation">,</span>
                                                                                           <span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>provider <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span>errorViewName<span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">resolveResource</span><span class="token punctuation">(</span>errorViewName<span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">ModelAndView</span> <span class="token function">resolveResource</span><span class="token punctuation">(</span><span class="token class-name">String</span> viewName<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> location <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resources<span class="token punctuation">.</span><span class="token function">getStaticLocations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Resource</span> resource <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>
            resource <span class="token operator">=</span> resource<span class="token punctuation">.</span><span class="token function">createRelative</span><span class="token punctuation">(</span>viewName <span class="token operator">+</span> <span class="token string">&quot;.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>resource<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HtmlResourceView</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®¹å™¨ä¸­æœ‰ä¸€ä¸ªé»˜è®¤çš„åä¸º error çš„ viewï¼› æä¾›äº†é»˜è®¤ç™½é¡µåŠŸèƒ½</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">View</span> <span class="token function">defaultErrorView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaultErrorView<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°è£…äº†JSONæ ¼å¼çš„é”™è¯¯ä¿¡æ¯</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">ErrorAttributes</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> search <span class="token operator">=</span> <span class="token class-name">SearchStrategy</span><span class="token punctuation">.</span><span class="token constant">CURRENT</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">DefaultErrorAttributes</span> <span class="token function">errorAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DefaultErrorAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§„åˆ™ï¼š</p><ol><li><p><strong>è§£æä¸€ä¸ªé”™è¯¯é¡µ</strong></p><ol><li><p>å¦‚æœå‘ç”Ÿäº†500ã€404ã€503ã€403 è¿™äº›é”™è¯¯</p></li><li><p>å¦‚æœæœ‰<strong>æ¨¡æ¿å¼•æ“</strong>ï¼Œé»˜è®¤åœ¨ <code>classpath:/templates/error/**ç²¾ç¡®ç .html**</code></p></li><li><p>å¦‚æœæ²¡æœ‰æ¨¡æ¿å¼•æ“ï¼Œåœ¨é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾ <code>**ç²¾ç¡®ç .html**</code></p></li></ol></li><li><p>å¦‚æœåŒ¹é…ä¸åˆ°<code>ç²¾ç¡®ç .html</code>è¿™äº›ç²¾ç¡®çš„é”™è¯¯é¡µï¼Œå°±å»æ‰¾<code>5xx.html</code>ï¼Œ<code>4xx.html</code><strong>æ¨¡ç³ŠåŒ¹é…</strong></p><ol><li>å¦‚æœæœ‰æ¨¡æ¿å¼•æ“ï¼Œé»˜è®¤åœ¨ <code>classpath:/templates/error/5xx.html</code></li><li>å¦‚æœæ²¡æœ‰æ¨¡æ¿å¼•æ“ï¼Œåœ¨é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾ <code>5xx.html</code></li></ol></li><li><p>å¦‚æœæ¨¡æ¿å¼•æ“è·¯å¾„<code>templates</code>ä¸‹æœ‰ <code>error.html</code>é¡µé¢ï¼Œå°±ç›´æ¥æ¸²æŸ“</p></li></ol><h3 id="è‡ªå®šä¹‰é”™è¯¯å“åº”" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰é”™è¯¯å“åº”" aria-hidden="true">#</a> è‡ªå®šä¹‰é”™è¯¯å“åº”</h3><h4 id="è‡ªå®šä¹‰jsonå“åº”" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰jsonå“åº”" aria-hidden="true">#</a> è‡ªå®šä¹‰jsonå“åº”</h4><p>ä½¿ç”¨<code>@ControllerAdvice + @ExceptionHandler</code> è¿›è¡Œç»Ÿä¸€å¼‚å¸¸å¤„ç†</p><h4 id="è‡ªå®šä¹‰é¡µé¢å“åº”" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰é¡µé¢å“åº”" aria-hidden="true">#</a> è‡ªå®šä¹‰é¡µé¢å“åº”</h4><p>æ ¹æ®bootçš„é”™è¯¯é¡µé¢è§„åˆ™ï¼Œè‡ªå®šä¹‰é¡µé¢æ¨¡æ¿</p><h4 id="æœ€ä½³å®æˆ˜" tabindex="-1"><a class="header-anchor" href="#æœ€ä½³å®æˆ˜" aria-hidden="true">#</a> æœ€ä½³å®æˆ˜</h4><ul><li><p><strong>å‰ååˆ†ç¦»</strong></p></li><li><ul><li>åå°å‘ç”Ÿçš„æ‰€æœ‰é”™è¯¯ï¼Œ<code>@ControllerAdvice + @ExceptionHandler</code>è¿›è¡Œç»Ÿä¸€å¼‚å¸¸å¤„ç†ã€‚</li></ul></li><li><p><strong>æœåŠ¡ç«¯é¡µé¢æ¸²æŸ“</strong></p></li><li><ul><li><strong>ä¸å¯é¢„çŸ¥çš„ä¸€äº›ï¼ŒHTTPç è¡¨ç¤ºçš„æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯é”™è¯¯</strong></li></ul></li><li><ul><li><ul><li>ç»™<code>classpath:/templates/error/</code>ä¸‹é¢ï¼Œæ”¾å¸¸ç”¨ç²¾ç¡®çš„é”™è¯¯ç é¡µé¢ã€‚<code>500.html</code>ï¼Œ<code>404.html</code></li><li>ç»™<code>classpath:/templates/error/</code>ä¸‹é¢ï¼Œæ”¾é€šç”¨æ¨¡ç³ŠåŒ¹é…çš„é”™è¯¯ç é¡µé¢ã€‚ <code>5xx.html</code>ï¼Œ<code>4xx.html</code></li></ul></li></ul></li><li><ul><li><strong>å‘ç”Ÿä¸šåŠ¡é”™è¯¯</strong></li></ul></li><li><ul><li><ul><li><strong>æ ¸å¿ƒä¸šåŠ¡</strong>ï¼Œæ¯ä¸€ç§é”™è¯¯ï¼Œéƒ½åº”è¯¥ä»£ç æ§åˆ¶ï¼Œ<strong>è·³è½¬åˆ°è‡ªå·±å®šåˆ¶çš„é”™è¯¯é¡µ</strong>ã€‚</li><li><strong>é€šç”¨ä¸šåŠ¡</strong>ï¼Œ<code>classpath:/templates/error.html</code>é¡µé¢ï¼Œ<strong>æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</strong>ã€‚</li></ul></li></ul></li></ul><p>é¡µé¢ï¼Œ<code>JSON</code>ï¼Œå¯ç”¨çš„<code>Model</code>ï¼ˆModel and Viewï¼‰æ•°æ®å¦‚ä¸‹ï¼š</p><figure><img src="/blog-notes/dist/assets/1681724501227-077073b7-349d-414f-8916-a822eb86c772-5079c3e9.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>BasicErrorController
# 
@RequestMapping(produces = MediaType.TEXT_HTML_VALUE)
# è¾“å‡º application/problem+json çš„é”™è¯¯æ¨¡å¼
spring.mvc.problemdetails.enabled = true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åµŒå…¥å¼å®¹å™¨" tabindex="-1"><a class="header-anchor" href="#åµŒå…¥å¼å®¹å™¨" aria-hidden="true">#</a> åµŒå…¥å¼å®¹å™¨</h2><p><strong>Servletå®¹å™¨</strong>ï¼šç®¡ç†ã€è¿è¡Œ<strong>Servletç»„ä»¶</strong>ï¼ˆServletã€Filterã€Listenerï¼‰çš„ç¯å¢ƒï¼Œä¸€èˆ¬æŒ‡<strong>æœåŠ¡å™¨</strong></p><h3 id="è‡ªåŠ¨é…ç½®åŸç†" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨é…ç½®åŸç†" aria-hidden="true">#</a> è‡ªåŠ¨é…ç½®åŸç†</h3><ul><li>SpringBoot é»˜è®¤åµŒå…¥<code>Tomcat</code>ä½œä¸º<code>Servlet</code>å®¹å™¨ã€‚</li><li><strong>è‡ªåŠ¨é…ç½®ç±»</strong>æ˜¯<code>ServletWebServerFactoryAutoConfiguration</code>ï¼Œ<code>EmbeddedWebServerFactoryCustomizerAutoConfiguration</code></li><li>è‡ªåŠ¨é…ç½®ç±»å¼€å§‹åˆ†æåŠŸèƒ½ã€‚<code>xxxxAutoConfiguration</code></li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@AutoConfiguration</span>
<span class="token annotation punctuation">@AutoConfigureOrder</span><span class="token punctuation">(</span><span class="token class-name">Ordered</span><span class="token punctuation">.</span><span class="token constant">HIGHEST_PRECEDENCE</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span><span class="token constant">SERVLET</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">ServerProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">ServletWebServerFactoryAutoConfiguration<span class="token punctuation">.</span>BeanPostProcessorsRegistrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
		<span class="token class-name">ServletWebServerFactoryConfiguration<span class="token punctuation">.</span>EmbeddedTomcat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
		<span class="token class-name">ServletWebServerFactoryConfiguration<span class="token punctuation">.</span>EmbeddedJetty</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
		<span class="token class-name">ServletWebServerFactoryConfiguration<span class="token punctuation">.</span>EmbeddedUndertow</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletWebServerFactoryAutoConfiguration</span> <span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p><code>ServletWebServerFactoryAutoConfiguration</code> è‡ªåŠ¨é…ç½®äº†åµŒå…¥å¼å®¹å™¨åœºæ™¯</p></li><li><p>ç»‘å®šäº†<code>ServerProperties</code>é…ç½®ç±»ï¼Œæ‰€æœ‰å’ŒæœåŠ¡å™¨æœ‰å…³çš„é…ç½® <code>server</code></p></li><li><p><code>ServletWebServerFactoryAutoConfiguration</code> å¯¼å…¥äº† åµŒå…¥å¼çš„ä¸‰å¤§æœåŠ¡å™¨ <code>Tomcat</code>ã€<code>Jetty</code>ã€<code>Undertow</code></p></li><li><ol><li>å¯¼å…¥ <code>Tomcat</code>ã€<code>Jetty</code>ã€<code>Undertow</code> éƒ½æœ‰æ¡ä»¶æ³¨è§£ã€‚ç³»ç»Ÿä¸­æœ‰è¿™ä¸ªç±»æ‰è¡Œï¼ˆä¹Ÿå°±æ˜¯å¯¼äº†åŒ…ï¼‰</li><li>é»˜è®¤ <code>Tomcat</code>é…ç½®ç”Ÿæ•ˆã€‚ç»™å®¹å™¨ä¸­æ”¾ TomcatServletWebServerFactory</li><li>éƒ½ç»™å®¹å™¨ä¸­ <code>ServletWebServerFactory</code>æ”¾äº†ä¸€ä¸ª <strong>webæœåŠ¡å™¨å·¥å‚ï¼ˆé€ webæœåŠ¡å™¨çš„ï¼‰</strong></li><li><strong>webæœåŠ¡å™¨å·¥å‚ éƒ½æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œ</strong><code>getWebServer</code>è·å–webæœåŠ¡å™¨</li><li>TomcatServletWebServerFactory åˆ›å»ºäº† tomcatã€‚</li></ol></li><li><p>ServletWebServerFactory ä»€ä¹ˆæ—¶å€™ä¼šåˆ›å»º webServerå‡ºæ¥ã€‚</p></li><li><p><code>ServletWebServerApplicationContext</code>iocå®¹å™¨ï¼Œå¯åŠ¨çš„æ—¶å€™ä¼šè°ƒç”¨åˆ›å»ºwebæœåŠ¡å™¨</p></li><li><p>Spring**å®¹å™¨åˆ·æ–°ï¼ˆå¯åŠ¨ï¼‰**çš„æ—¶å€™ï¼Œä¼šé¢„ç•™ä¸€ä¸ªæ—¶æœºï¼Œåˆ·æ–°å­å®¹å™¨ã€‚<code>onRefresh()</code></p></li><li><p>refresh() å®¹å™¨åˆ·æ–° åäºŒå¤§æ­¥çš„åˆ·æ–°å­å®¹å™¨ä¼šè°ƒç”¨ <code>onRefresh()</code>ï¼›</p></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token function">createWebServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ApplicationContextException</span><span class="token punctuation">(</span><span class="token string">&quot;Unable to start web server&quot;</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Webåœºæ™¯çš„Springå®¹å™¨å¯åŠ¨ï¼Œåœ¨onRefreshçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨åˆ›å»ºwebæœåŠ¡å™¨çš„æ–¹æ³•ã€‚</p><p>WebæœåŠ¡å™¨çš„åˆ›å»ºæ˜¯é€šè¿‡WebServerFactoryæå®šçš„ã€‚å®¹å™¨ä¸­åˆä¼šæ ¹æ®å¯¼äº†ä»€ä¹ˆåŒ…æ¡ä»¶æ³¨è§£ï¼Œå¯åŠ¨ç›¸å…³çš„ æœåŠ¡å™¨é…ç½®ï¼Œé»˜è®¤<code>EmbeddedTomcat</code>ä¼šç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª <code>TomcatServletWebServerFactory</code>ï¼Œå¯¼è‡´é¡¹ç›®å¯åŠ¨ï¼Œè‡ªåŠ¨åˆ›å»ºå‡ºTomcatã€‚</p></blockquote><h3 id="è‡ªå®šä¹‰" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰" aria-hidden="true">#</a> è‡ªå®šä¹‰</h3><figure><img src="/blog-notes/dist/assets/1681725850466-2ecf12f4-8b66-469f-9d5d-377a33923b3c-72cc2673.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-api.version</span><span class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-api.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- Exclude the Tomcat dependency --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-tomcat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- Use Jetty instead --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-jetty<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#æœ€ä½³å®è·µ" aria-hidden="true">#</a> æœ€ä½³å®è·µ</h3><p><strong>ç”¨æ³•ï¼š</strong></p><ul><li>ä¿®æ”¹<code>server</code>ä¸‹çš„ç›¸å…³é…ç½®å°±å¯ä»¥ä¿®æ”¹<strong>æœåŠ¡å™¨å‚æ•°</strong></li><li>é€šè¿‡ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª<code>**ServletWebServerFactory**</code>ï¼Œæ¥ç¦ç”¨æ‰SpringBooté»˜è®¤æ”¾çš„æœåŠ¡å™¨å·¥å‚ï¼Œå®ç°è‡ªå®šä¹‰åµŒå…¥<strong>ä»»æ„æœåŠ¡å™¨</strong>ã€‚</li></ul><h2 id="å…¨é¢æ¥ç®¡springmvc" tabindex="-1"><a class="header-anchor" href="#å…¨é¢æ¥ç®¡springmvc" aria-hidden="true">#</a> å…¨é¢æ¥ç®¡<code>SpringMVC</code></h2><p>to do</p><p><a href="https://www.yuque.com/leifengyang/springboot3/wp5l9qbu1k64frz1#qo4C8" target="_blank" rel="noopener noreferrer">https://www.yuque.com/leifengyang/springboot3/wp5l9qbu1k64frz1#qo4C8<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="æœ€ä½³å®æˆ˜-1" tabindex="-1"><a class="header-anchor" href="#æœ€ä½³å®æˆ˜-1" aria-hidden="true">#</a> æœ€ä½³å®æˆ˜</h2><h3 id="ä¸‰ç§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#ä¸‰ç§æ–¹å¼" aria-hidden="true">#</a> ä¸‰ç§æ–¹å¼</h3><table><thead><tr><th>æ–¹å¼</th><th>ç”¨æ³•</th><th>ç”¨æ³•</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td><strong>å…¨è‡ªåŠ¨</strong></td><td>ç›´æ¥ç¼–å†™æ§åˆ¶å™¨é€»è¾‘</td><td></td><td>å…¨éƒ¨ä½¿ç”¨<strong>è‡ªåŠ¨é…ç½®é»˜è®¤æ•ˆæœ</strong></td></tr><tr><td><strong>æ‰‹è‡ªä¸€ä½“</strong></td><td><code>@Configuration</code> + é…ç½®`WebMvcConfigurer+ <em>é…ç½® WebMvcRegistrations</em></td><td><strong>ä¸è¦æ ‡æ³¨</strong> <code>@EnableWebMvc</code></td><td><strong>ä¿ç•™è‡ªåŠ¨é…ç½®æ•ˆæœ</strong> <strong>æ‰‹åŠ¨è®¾ç½®éƒ¨åˆ†åŠŸèƒ½</strong> å®šä¹‰MVCåº•å±‚ç»„ä»¶</td></tr><tr><td><strong>å…¨æ‰‹åŠ¨</strong></td><td><code>@Configuration</code> + é…ç½®<code>WebMvcConfigurer</code></td><td><strong>æ ‡æ³¨</strong> <code>@EnableWebMvc</code></td><td><strong>ç¦ç”¨è‡ªåŠ¨é…ç½®æ•ˆæœ</strong> <strong>å…¨æ‰‹åŠ¨è®¾ç½®</strong></td></tr></tbody></table><p>æ€»ç»“ï¼š</p><p>ç»™å®¹å™¨ä¸­å†™ä¸€ä¸ªé…ç½®ç±»<code>@Configuration</code>å®ç° <code>WebMvcConfigurer</code>ä½†æ˜¯ä¸è¦æ ‡æ³¨ <code>@EnableWebMvc</code>æ³¨è§£ï¼Œå®ç°<strong>æ‰‹è‡ªä¸€ä½“</strong>çš„æ•ˆæœã€‚</p><h3 id="ä¸¤ç§æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ä¸¤ç§æ¨¡å¼" aria-hidden="true">#</a> ä¸¤ç§æ¨¡å¼</h3><p>1ã€<code>å‰ååˆ†ç¦»æ¨¡å¼</code>ï¼š <code>@RestController </code>å“åº”<code>JSON</code>æ•°æ®</p><p>2ã€<code>å‰åä¸åˆ†ç¦»æ¨¡å¼</code>ï¼š<code>@Controller + Thymeleaf</code>æ¨¡æ¿å¼•æ“</p><h1 id="æ•°æ®åº“å¼€å‘" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“å¼€å‘" aria-hidden="true">#</a> æ•°æ®åº“å¼€å‘</h1><ul><li>å¯¼å…¥ä¾èµ–</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è‡ªåŠ¨é…ç½®åŸç†-1" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨é…ç½®åŸç†-1" aria-hidden="true">#</a> è‡ªåŠ¨é…ç½®åŸç†</h2><p>è‡ªåŠ¨é…ç½®åŸç†</p><p><strong>SSMæ•´åˆæ€»ç»“ï¼š</strong></p><ol><li><p><strong>å¯¼å…¥</strong> <code>mybatis-spring-boot-starter</code></p></li><li><p>é…ç½®<strong>æ•°æ®æº</strong>ä¿¡æ¯</p></li><li><p>é…ç½®mybatisçš„<code>**mapperæ¥å£æ‰«æ**</code>ä¸<code>**xmlæ˜ å°„æ–‡ä»¶æ‰«æ**</code></p></li><li><p>ç¼–å†™beanï¼Œmapperï¼Œç”Ÿæˆxmlï¼Œç¼–å†™sql è¿›è¡Œcrudã€‚<strong>äº‹åŠ¡ç­‰æ“ä½œä¾ç„¶å’ŒSpringä¸­ç”¨æ³•ä¸€æ ·</strong></p></li><li><p>æ•ˆæœï¼š</p><ul><li>æ‰€æœ‰sqlå†™åœ¨xmlä¸­</li><li>æ‰€æœ‰<code>mybatisé…ç½®</code>å†™åœ¨<code>application.properties</code>ä¸‹é¢</li></ul></li><li><p><code>jdbcåœºæ™¯çš„è‡ªåŠ¨é…ç½®</code>ï¼š</p><ul><li><code>mybatis-spring-boot-starter</code>å¯¼å…¥ <code>spring-boot-starter-jdbc</code>ï¼Œjdbcæ˜¯æ“ä½œæ•°æ®åº“çš„åœºæ™¯</li><li><code>Jdbc</code>åœºæ™¯çš„å‡ ä¸ªè‡ªåŠ¨é…ç½®</li><li>org.springframework.boot.autoconfigure.jdbc.<strong>DataSourceAutoConfiguration</strong></li></ul></li><li><p><strong>æ•°æ®æºçš„è‡ªåŠ¨é…ç½®</strong></p><ul><li>æ‰€æœ‰å’Œæ•°æ®æºæœ‰å…³çš„é…ç½®éƒ½ç»‘å®šåœ¨<code>DataSourceProperties</code></li><li>é»˜è®¤ä½¿ç”¨ <code>HikariDataSource</code></li><li>org.springframework.boot.autoconfigure.jdbc.<strong>JdbcTemplateAutoConfiguration</strong></li><li>ç»™å®¹å™¨ä¸­æ”¾äº†<code>JdbcTemplate</code>æ“ä½œæ•°æ®åº“</li><li>org.springframework.boot.autoconfigure.jdbc.<strong>JndiDataSourceAutoConfiguration</strong></li><li>org.springframework.boot.autoconfigure.jdbc.<strong>XADataSourceAutoConfiguration</strong></li></ul></li><li><p><strong>åŸºäºXAäºŒé˜¶æäº¤åè®®çš„åˆ†å¸ƒå¼äº‹åŠ¡æ•°æ®æº</strong></p><ul><li>org.springframework.boot.autoconfigure.jdbc.<strong>DataSourceTransactionManagerAutoConfiguration</strong></li><li><strong>æ”¯æŒäº‹åŠ¡</strong></li></ul></li><li><p><strong>å…·æœ‰çš„åº•å±‚èƒ½åŠ›ï¼šæ•°æ®æºã€</strong><code>JdbcTemplate</code>ã€<strong>äº‹åŠ¡</strong></p><ul><li><p><code>MyBatisAutoConfiguration</code>ï¼šé…ç½®äº†MyBatisçš„æ•´åˆæµç¨‹</p><ul><li><code>mybatis-spring-boot-starter</code>å¯¼å…¥ <code>mybatis-spring-boot-autoconfigureï¼ˆmybatisçš„è‡ªåŠ¨é…ç½®åŒ…ï¼‰</code>ï¼Œ</li></ul></li><li><p>é»˜è®¤åŠ è½½ä¸¤ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼š</p><ul><li>org.mybatis.spring.boot.autoconfigure.MybatisLanguageDriverAutoConfiguration</li><li>org.mybatis.spring.boot.autoconfigure.<strong>MybatisAutoConfiguration</strong></li></ul></li><li><p><strong>å¿…é¡»åœ¨æ•°æ®æºé…ç½®å¥½ä¹‹åæ‰é…ç½®</strong></p><ul><li>ç»™å®¹å™¨ä¸­<code>SqlSessionFactory</code>ç»„ä»¶ã€‚åˆ›å»ºå’Œæ•°æ®åº“çš„ä¸€æ¬¡ä¼šè¯</li><li>ç»™å®¹å™¨ä¸­<code>SqlSessionTemplate</code>ç»„ä»¶ã€‚æ“ä½œæ•°æ®åº“</li></ul></li><li><p><strong>MyBatisçš„æ‰€æœ‰é…ç½®ç»‘å®šåœ¨</strong><code>MybatisProperties</code></p></li><li><p>æ¯ä¸ª<strong>Mapperæ¥å£</strong>çš„<strong>ä»£ç†å¯¹è±¡</strong>æ˜¯æ€ä¹ˆåˆ›å»ºæ”¾åˆ°å®¹å™¨ä¸­ã€‚è¯¦è§**@MapperScan**åŸç†ï¼š</p><ul><li>åˆ©ç”¨<code>@Import(MapperScannerRegistrar.class)</code>æ‰¹é‡ç»™å®¹å™¨ä¸­æ³¨å†Œç»„ä»¶ã€‚è§£ææŒ‡å®šçš„åŒ…è·¯å¾„é‡Œé¢çš„æ¯ä¸€ä¸ªç±»ï¼Œä¸ºæ¯ä¸€ä¸ªMapperæ¥å£ç±»ï¼Œåˆ›å»ºBeanå®šä¹‰ä¿¡æ¯ï¼Œæ³¨å†Œåˆ°å®¹å™¨ä¸­ã€‚</li></ul></li></ul></li></ol><p>å¦‚ä½•åˆ†æå“ªä¸ªåœºæ™¯å¯¼å…¥ä»¥åï¼Œå¼€å¯äº†å“ªäº›è‡ªåŠ¨é…ç½®ç±»ã€‚</p><p>æ‰¾ï¼š<code>classpath:/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>æ–‡ä»¶ä¸­é…ç½®çš„æ‰€æœ‰å€¼ï¼Œå°±æ˜¯è¦å¼€å¯çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œä½†æ˜¯æ¯ä¸ªç±»å¯èƒ½æœ‰æ¡ä»¶æ³¨è§£ï¼ŒåŸºäºæ¡ä»¶æ³¨è§£åˆ¤æ–­å“ªä¸ªè‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆäº†ã€‚</p><h2 id="å¿«é€Ÿå®šä½ç”Ÿæ•ˆçš„é…ç½®" tabindex="-1"><a class="header-anchor" href="#å¿«é€Ÿå®šä½ç”Ÿæ•ˆçš„é…ç½®" aria-hidden="true">#</a> å¿«é€Ÿå®šä½ç”Ÿæ•ˆçš„é…ç½®</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># æ‰“å¼€ debug æ¨¡å¼
#debug=true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ‰©å±•-æ•´åˆå…¶ä»–æ•°æ®æº" tabindex="-1"><a class="header-anchor" href="#æ‰©å±•-æ•´åˆå…¶ä»–æ•°æ®æº" aria-hidden="true">#</a> æ‰©å±•ï¼šæ•´åˆå…¶ä»–æ•°æ®æº</h2><h3 id="druid-æ•°æ®æº" tabindex="-1"><a class="header-anchor" href="#druid-æ•°æ®æº" aria-hidden="true">#</a> Druid æ•°æ®æº</h3><p>æš‚ä¸æ”¯æŒ <code>SpringBoot3</code></p><ul><li>å¯¼å…¥<code>druid-starter</code></li><li>å†™é…ç½®</li><li>åˆ†æè‡ªåŠ¨é…ç½®äº†å“ªäº›ä¸œè¥¿ï¼Œæ€ä¹ˆç”¨</li></ul><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment">#æ•°æ®æºåŸºæœ¬é…ç½®</span>
<span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://192.168.200.100:3306/demo</span>
<span class="token key attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span>
<span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span>
<span class="token key attr-name">spring.datasource.type</span><span class="token punctuation">=</span><span class="token value attr-value">com.alibaba.druid.pool.DruidDataSource</span>

<span class="token comment"># é…ç½®StatFilterç›‘æ§</span>
<span class="token key attr-name">spring.datasource.druid.filter.stat.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">spring.datasource.druid.filter.stat.db-type</span><span class="token punctuation">=</span><span class="token value attr-value">mysql</span>
<span class="token key attr-name">spring.datasource.druid.filter.stat.log-slow-sql</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">spring.datasource.druid.filter.stat.slow-sql-millis</span><span class="token punctuation">=</span><span class="token value attr-value">2000</span>
<span class="token comment"># é…ç½®WallFilteré˜²ç«å¢™</span>
<span class="token key attr-name">spring.datasource.druid.filter.wall.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">spring.datasource.druid.filter.wall.db-type</span><span class="token punctuation">=</span><span class="token value attr-value">mysql</span>
<span class="token key attr-name">spring.datasource.druid.filter.wall.config.delete-allow</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">spring.datasource.druid.filter.wall.config.drop-table-allow</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token comment"># é…ç½®ç›‘æ§é¡µï¼Œå†…ç½®ç›‘æ§é¡µé¢çš„é¦–é¡µæ˜¯ /druid/index.html</span>
<span class="token key attr-name">spring.datasource.druid.stat-view-servlet.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">spring.datasource.druid.stat-view-servlet.login-username</span><span class="token punctuation">=</span><span class="token value attr-value">admin</span>
<span class="token key attr-name">spring.datasource.druid.stat-view-servlet.login-password</span><span class="token punctuation">=</span><span class="token value attr-value">admin</span>
<span class="token key attr-name">spring.datasource.druid.stat-view-servlet.allow</span><span class="token punctuation">=</span><span class="token value attr-value">*</span>

<span class="token comment"># å…¶ä»– Filter é…ç½®ä¸å†æ¼”ç¤º</span>
<span class="token comment"># ç›®å‰ä¸ºä»¥ä¸‹ Filter æä¾›äº†é…ç½®æ”¯æŒï¼Œè¯·å‚è€ƒæ–‡æ¡£æˆ–è€…æ ¹æ®IDEæç¤ºï¼ˆspring.datasource.druid.filter.*ï¼‰è¿›è¡Œé…ç½®ã€‚</span>
<span class="token comment"># StatFilter</span>
<span class="token comment"># WallFilter</span>
<span class="token comment"># ConfigFilter</span>
<span class="token comment"># EncodingConvertFilter</span>
<span class="token comment"># Slf4jLogFilter</span>
<span class="token comment"># Log4jFilter</span>
<span class="token comment"># Log4j2Filter</span>
<span class="token comment"># CommonsLogFilter</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç¤ºä¾‹æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹æ•°æ®åº“" aria-hidden="true">#</a> ç¤ºä¾‹æ•°æ®åº“</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>t_user<span class="token punctuation">`</span></span>
<span class="token punctuation">(</span>
    <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span>         <span class="token keyword">BIGINT</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>   <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç¼–å·&#39;</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>login_name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç”¨æˆ·åç§°&#39;</span> <span class="token keyword">COLLATE</span> <span class="token string">&#39;utf8_general_ci&#39;</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>nick_name<span class="token punctuation">`</span></span>  <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç”¨æˆ·æ˜µç§°&#39;</span> <span class="token keyword">COLLATE</span> <span class="token string">&#39;utf8_general_ci&#39;</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>passwd<span class="token punctuation">`</span></span>     <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç”¨æˆ·å¯†ç &#39;</span> <span class="token keyword">COLLATE</span> <span class="token string">&#39;utf8_general_ci&#39;</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>login_name<span class="token punctuation">,</span> nick_name<span class="token punctuation">,</span> passwd<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;zhangsan&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;å¼ ä¸‰&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;123456&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="åŸºç¡€ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€ç‰¹æ€§" aria-hidden="true">#</a> åŸºç¡€ç‰¹æ€§</h1><h2 id="banner" tabindex="-1"><a class="header-anchor" href="#banner" aria-hidden="true">#</a> Banner</h2><h2 id="springapplication" tabindex="-1"><a class="header-anchor" href="#springapplication" aria-hidden="true">#</a> SpringApplication</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>
<span class="token comment">// ===============1ã€è‡ªå®šä¹‰ SpringApplication çš„åº•å±‚è®¾ç½®</span>
<span class="token class-name">SpringApplication</span> application <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span><span class="token class-name">Boot306FeaturesApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//ç¨‹åºåŒ–è°ƒæ•´ã€SpringApplicationçš„å‚æ•°ã€‘</span>
<span class="token comment">//        application.setDefaultProperties();</span>
<span class="token comment">//è¿™ä¸ªé…ç½®ä¸ä¼˜å…ˆ</span>
application<span class="token punctuation">.</span><span class="token function">setBannerMode</span><span class="token punctuation">(</span><span class="token class-name">Banner<span class="token punctuation">.</span>Mode</span><span class="token punctuation">.</span><span class="token constant">OFF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//ã€é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§é«˜äºç¨‹åºåŒ–è°ƒæ•´çš„ä¼˜å…ˆçº§ã€‘</span>
<span class="token comment">//2ã€SpringApplication è¿è¡Œèµ·æ¥</span>
application<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="fluentbuilder-api" tabindex="-1"><a class="header-anchor" href="#fluentbuilder-api" aria-hidden="true">#</a> FluentBuilder API</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">new</span> <span class="token class-name">SpringApplicationBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">sources</span><span class="token punctuation">(</span><span class="token class-name">Parent</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">child</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">bannerMode</span><span class="token punctuation">(</span><span class="token class-name">Banner<span class="token punctuation">.</span>Mode</span><span class="token punctuation">.</span><span class="token constant">OFF</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="profiles" tabindex="-1"><a class="header-anchor" href="#profiles" aria-hidden="true">#</a> profiles</h2><blockquote><p>ç¯å¢ƒéš”ç¦»èƒ½åŠ›ï¼›å¿«é€Ÿåˆ‡æ¢å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒ</p><p>æ­¥éª¤ï¼š</p><ol><li><strong>æ ‡è¯†ç¯å¢ƒ</strong>ï¼šæŒ‡å®šå“ªäº›ç»„ä»¶ã€é…ç½®åœ¨å“ªä¸ªç¯å¢ƒç”Ÿæ•ˆ</li><li><strong>åˆ‡æ¢ç¯å¢ƒ</strong>ï¼šè¿™ä¸ªç¯å¢ƒå¯¹åº”çš„æ‰€æœ‰ç»„ä»¶å’Œé…ç½®å°±åº”è¯¥ç”Ÿæ•ˆ</li></ol></blockquote><h3 id="ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨" aria-hidden="true">#</a> ä½¿ç”¨</h3><h4 id="æŒ‡å®šç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#æŒ‡å®šç¯å¢ƒ" aria-hidden="true">#</a> æŒ‡å®šç¯å¢ƒ</h4><ul><li>Spring Profiles æä¾›ä¸€ç§<strong>éš”ç¦»é…ç½®</strong>çš„æ–¹å¼ï¼Œä½¿å…¶ä»…åœ¨<strong>ç‰¹å®šç¯å¢ƒ</strong>ç”Ÿæ•ˆï¼›</li><li>ä»»ä½•<code>@Component, @Configuration</code> æˆ– <code>@ConfigurationProperties</code> å¯ä»¥ä½¿ç”¨ <code>@Profile</code> æ ‡è®°ï¼Œæ¥æŒ‡å®šä½•æ—¶è¢«åŠ è½½ã€‚ã€<strong>å®¹å™¨ä¸­çš„ç»„ä»¶</strong>éƒ½å¯ä»¥è¢« <code>@Profile</code>æ ‡è®°ã€‘</li></ul><h4 id="ç¯å¢ƒæ¿€æ´»" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒæ¿€æ´»" aria-hidden="true">#</a> ç¯å¢ƒæ¿€æ´»</h4><ol><li>é…ç½®æ¿€æ´»æŒ‡å®šç¯å¢ƒï¼› é…ç½®æ–‡ä»¶</li></ol><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.profiles.active</span><span class="token punctuation">=</span><span class="token value attr-value">production,hsqldb</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œæ¿€æ´»ã€‚<code>--spring.profiles.active=dev,hsqldb</code></li><li>è¿˜å¯ä»¥é…ç½®<strong>é»˜è®¤ç¯å¢ƒ</strong>ï¼› ä¸æ ‡æ³¨<code>@Profile</code> çš„ç»„ä»¶æ°¸è¿œéƒ½å­˜åœ¨ã€‚ <ul><li>ä»¥å‰é»˜è®¤ç¯å¢ƒå«default</li><li><code>spring.profiles.default=test</code></li></ul></li><li>æ¨èä½¿ç”¨æ¿€æ´»æ–¹å¼æ¿€æ´»æŒ‡å®šç¯å¢ƒ</li></ol><h4 id="ç¯å¢ƒåŒ…å«" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒåŒ…å«" aria-hidden="true">#</a> ç¯å¢ƒåŒ…å«</h4><p>æ³¨æ„ï¼š</p><ol><li>spring.profiles.active å’Œspring.profiles.default åªèƒ½ç”¨åˆ° <strong>æ—  profile çš„æ–‡ä»¶</strong>ä¸­ï¼Œå¦‚æœåœ¨application-dev.yamlä¸­ç¼–å†™å°±æ˜¯<strong>æ— æ•ˆçš„</strong></li><li>ä¹Ÿå¯ä»¥<strong>é¢å¤–æ·»åŠ ç”Ÿæ•ˆæ–‡ä»¶</strong>ï¼Œè€Œä¸æ˜¯æ¿€æ´»æ›¿æ¢ã€‚æ¯”å¦‚ï¼š</li></ol><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code>
<span class="token key attr-name">spring.profiles.include[0]</span><span class="token punctuation">=</span><span class="token value attr-value">common</span>
<span class="token key attr-name">spring.profiles.include[1]</span><span class="token punctuation">=</span><span class="token value attr-value">local</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€ä½³å®æˆ˜ï¼š</p><ul><li><strong>ç”Ÿæ•ˆçš„ç¯å¢ƒ</strong> = <strong>æ¿€æ´»çš„ç¯å¢ƒ/é»˜è®¤ç¯å¢ƒ</strong> + <strong>åŒ…å«çš„ç¯å¢ƒ</strong></li><li>é¡¹ç›®é‡Œé¢è¿™ä¹ˆç”¨ <ul><li>åŸºç¡€çš„é…ç½®<code>mybatis</code>ã€<code>log</code>ã€<code>xxx</code>ï¼šå†™åˆ°<strong>åŒ…å«ç¯å¢ƒä¸­</strong></li><li>éœ€è¦åŠ¨æ€åˆ‡æ¢å˜åŒ–çš„ <code>db</code>ã€<code>redis</code>ï¼šå†™åˆ°<strong>æ¿€æ´»çš„ç¯å¢ƒä¸­</strong></li></ul></li></ul><h3 id="profile-é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#profile-é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> Profile é…ç½®æ–‡ä»¶</h3><ul><li><code>application-{profile}.properties</code>å¯ä»¥ä½œä¸º<strong>æŒ‡å®šç¯å¢ƒçš„é…ç½®æ–‡ä»¶</strong>ã€‚</li><li>æ¿€æ´»è¿™ä¸ªç¯å¢ƒï¼Œ<strong>é…ç½®</strong>å°±ä¼šç”Ÿæ•ˆã€‚æœ€ç»ˆç”Ÿæ•ˆçš„æ‰€æœ‰<strong>é…ç½®</strong>æ˜¯ <ul><li><code>application.properties</code>ï¼šä¸»é…ç½®æ–‡ä»¶ï¼Œä»»æ„æ—¶å€™éƒ½ç”Ÿæ•ˆ</li><li><code>application-{profile}.properties</code>ï¼šæŒ‡å®šç¯å¢ƒé…ç½®æ–‡ä»¶ï¼Œæ¿€æ´»æŒ‡å®šç¯å¢ƒç”Ÿæ•ˆ</li></ul></li></ul><p>profileä¼˜å…ˆçº§ &gt; application</p><h3 id="å¤–éƒ¨åŒ–é…ç½®" tabindex="-1"><a class="header-anchor" href="#å¤–éƒ¨åŒ–é…ç½®" aria-hidden="true">#</a> å¤–éƒ¨åŒ–é…ç½®</h3><p><strong>åœºæ™¯</strong>ï¼šçº¿ä¸Šåº”ç”¨å¦‚ä½•<strong>å¿«é€Ÿä¿®æ”¹é…ç½®</strong>ï¼Œå¹¶åº”<strong>ç”¨æœ€æ–°é…ç½®</strong>ï¼Ÿ</p><ul><li>SpringBoot ä½¿ç”¨ <strong>é…ç½®ä¼˜å…ˆçº§</strong> + <strong>å¤–éƒ¨é…ç½®</strong> ç®€åŒ–é…ç½®æ›´æ–°ã€ç®€åŒ–è¿ç»´ã€‚</li><li>åªéœ€è¦ç»™<code>jar</code>åº”ç”¨æ‰€åœ¨çš„æ–‡ä»¶å¤¹æ”¾ä¸€ä¸ª<code>application.properties</code>æœ€æ–°é…ç½®æ–‡ä»¶ï¼Œé‡å¯é¡¹ç›®å°±èƒ½è‡ªåŠ¨åº”ç”¨æœ€æ–°é…ç½®</li></ul><h4 id="é…ç½®ä¼˜å…ˆçº§" tabindex="-1"><a class="header-anchor" href="#é…ç½®ä¼˜å…ˆçº§" aria-hidden="true">#</a> é…ç½®ä¼˜å…ˆçº§</h4><p>Spring Boot å…è®¸å°†<strong>é…ç½®å¤–éƒ¨åŒ–</strong>ï¼Œä»¥ä¾¿å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸­ä½¿ç”¨ç›¸åŒçš„åº”ç”¨ç¨‹åºä»£ç ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å„ç§<strong>å¤–éƒ¨é…ç½®æº</strong>ï¼ŒåŒ…æ‹¬Java Propertiesæ–‡ä»¶ã€YAMLæ–‡ä»¶ã€ç¯å¢ƒå˜é‡å’Œå‘½ä»¤è¡Œå‚æ•°ã€‚</p><p>@Valueå¯ä»¥è·å–å€¼ï¼Œä¹Ÿå¯ä»¥ç”¨@ConfigurationPropertieså°†æ‰€æœ‰å±æ€§ç»‘å®šåˆ°java objectä¸­</p><p><strong>ä»¥ä¸‹æ˜¯ SpringBoot å±æ€§æºåŠ è½½é¡ºåºã€‚</strong> <strong>åé¢çš„ä¼šè¦†ç›–å‰é¢çš„å€¼</strong>ã€‚ç”±ä½åˆ°é«˜ï¼Œé«˜ä¼˜å…ˆçº§é…ç½®è¦†ç›–ä½ä¼˜å…ˆçº§</p><ol><li><strong>é»˜è®¤å±æ€§</strong>ï¼ˆé€šè¿‡<code>SpringApplication.setDefaultProperties</code>æŒ‡å®šçš„ï¼‰</li><li>@PropertySourceæŒ‡å®šåŠ è½½çš„é…ç½®ï¼ˆéœ€è¦å†™åœ¨@Configurationç±»ä¸Šæ‰å¯ç”Ÿæ•ˆï¼‰</li><li><strong>é…ç½®æ–‡ä»¶</strong>ï¼ˆ <strong>application.properties/yml</strong>ç­‰ï¼‰</li><li>RandomValuePropertySourceæ”¯æŒçš„random.*é…ç½®ï¼ˆå¦‚ï¼š@Value(&quot;${random.int}&quot;)ï¼‰</li><li>OS ç¯å¢ƒå˜é‡</li><li>Java ç³»ç»Ÿå±æ€§ï¼ˆSystem.getProperties()ï¼‰</li><li>JNDI å±æ€§ï¼ˆæ¥è‡ªjava:comp/envï¼‰</li><li>ServletContext åˆå§‹åŒ–å‚æ•°</li><li><code>ServletConfig</code> åˆå§‹åŒ–å‚æ•°</li><li><code>SPRING_APPLICATION_JSON</code>å±æ€§ï¼ˆå†…ç½®åœ¨ç¯å¢ƒå˜é‡æˆ–ç³»ç»Ÿå±æ€§ä¸­çš„ JSONï¼‰</li><li><strong>å‘½ä»¤è¡Œå‚æ•°</strong></li><li>æµ‹è¯•å±æ€§ã€‚(<code>@SpringBootTest</code>è¿›è¡Œæµ‹è¯•æ—¶æŒ‡å®šçš„å±æ€§)</li><li>æµ‹è¯•ç±»@TestPropertySourceæ³¨è§£</li><li>Devtools è®¾ç½®çš„å…¨å±€å±æ€§ã€‚($HOME/.config/spring-boot)</li></ol><p>ç»“è®ºï¼šé…ç½®å¯ä»¥å†™åˆ°å¾ˆå¤šä½ç½®ï¼Œå¸¸è§çš„ä¼˜å…ˆçº§é¡ºåºï¼š</p><ul><li><code>å‘½ä»¤è¡Œ</code>&gt; <code>é…ç½®æ–‡ä»¶</code>&gt; <code>springapplicationé…ç½®</code></li></ul><p><strong>é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§</strong>å¦‚ä¸‹ï¼š(<strong>åé¢è¦†ç›–å‰é¢</strong>)ï¼ˆç”±å°åˆ°å¤§ï¼‰</p><ol><li><strong>jar åŒ…å†…</strong>çš„ <code>application.properties/yml</code></li><li><strong>jar åŒ…å†…</strong>çš„ <code>application-{profile}.properties/yml</code></li><li><strong>jar åŒ…å¤–</strong>çš„ <code>application.properties/yml</code></li><li><strong>jar åŒ…å¤–</strong>çš„ <code>application-{profile}.properties/yml</code></li></ol><p><strong>å»ºè®®</strong>ï¼š<strong>ç”¨ä¸€ç§æ ¼å¼çš„é…ç½®æ–‡ä»¶</strong>ã€‚<code>å¦‚æœ.propertieså’Œ.ymlåŒæ—¶å­˜åœ¨,åˆ™.propertiesä¼˜å…ˆ</code></p><blockquote><p>ç»“è®ºï¼š<code>åŒ…å¤– &gt; åŒ…å†…</code>ï¼› åŒçº§æƒ…å†µï¼š<code>profileé…ç½® &gt; applicationé…ç½®</code></p></blockquote><p>æ‰€æœ‰å‚æ•°å‡å¯ç”±å‘½ä»¤è¡Œä¼ å…¥ï¼Œä½¿ç”¨<code>--å‚æ•°é¡¹=å‚æ•°å€¼</code>ï¼Œå°†ä¼šè¢«æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œå¹¶ä¼˜å…ˆäºé…ç½®æ–‡ä»¶ã€‚</p><p><strong>æ¯”å¦‚</strong><code>java -jar app.jar --name=&quot;Spring&quot;</code><strong>,å¯ä»¥ä½¿ç”¨</strong><code>@Value(&quot;${name}&quot;)</code><strong>è·å–</strong></p><p>æ¼”ç¤ºåœºæ™¯ï¼š</p><ul><li>åŒ…å†…ï¼š application.properties <code>server.port=8000</code></li><li>åŒ…å†…ï¼š application-dev.properties <code>server.port=9000</code></li><li>åŒ…å¤–ï¼š application.properties <code>server.port=8001</code></li><li>åŒ…å¤–ï¼š application-dev.properties <code>server.port=9001</code></li></ul><p>å¯åŠ¨ç«¯å£ï¼Ÿï¼šå‘½ä»¤è¡Œ &gt; <code>9001</code> &gt; <code>8001</code> &gt; <code>9000</code> &gt; <code>8000</code></p><h2 id="å¤–éƒ¨é…ç½®" tabindex="-1"><a class="header-anchor" href="#å¤–éƒ¨é…ç½®" aria-hidden="true">#</a> å¤–éƒ¨é…ç½®</h2><p>SpringBoot åº”ç”¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨å¯»æ‰¾ application.properties å’Œ application.yaml ä½ç½®ï¼Œè¿›è¡ŒåŠ è½½ã€‚é¡ºåºå¦‚ä¸‹ï¼šï¼ˆ<strong>åé¢è¦†ç›–å‰é¢</strong>ï¼‰</p><ol><li><p>ç±»è·¯å¾„: å†…éƒ¨</p><ul><li>ç±»æ ¹è·¯å¾„</li><li>ç±»ä¸‹/configåŒ…</li></ul></li><li><p>å½“å‰è·¯å¾„ï¼ˆé¡¹ç›®æ‰€åœ¨çš„ä½ç½®ï¼‰</p><ul><li>å½“å‰è·¯å¾„</li><li>å½“å‰ä¸‹/configå­ç›®å½•</li><li>/configç›®å½•çš„ç›´æ¥å­ç›®å½•</li></ul></li></ol><p>æœ€ç»ˆæ•ˆæœï¼šä¼˜å…ˆçº§ç”±é«˜åˆ°ä½ï¼Œå‰é¢è¦†ç›–åé¢</p><ul><li>å‘½ä»¤è¡Œ &gt; åŒ…å¤–configç›´æ¥å­ç›®å½• &gt; åŒ…å¤–configç›®å½• &gt; åŒ…å¤–æ ¹ç›®å½• &gt; åŒ…å†…ç›®å½•</li><li>åŒçº§æ¯”è¾ƒï¼š <ul><li>profileé…ç½® &gt; é»˜è®¤é…ç½®</li><li>propertiesé…ç½® &gt; yamlé…ç½®</li></ul></li></ul><figure><img src="/blog-notes/dist/assets/Snipaste_2023-07-20_23-32-19-9d8ad930.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>è§„å¾‹ï¼šæœ€å¤–å±‚çš„æœ€ä¼˜å…ˆã€‚</p><ul><li>å‘½ä»¤è¡Œ &gt; æ‰€æœ‰</li><li>åŒ…å¤– &gt; åŒ…å†…</li><li>configç›®å½• &gt; æ ¹ç›®å½•</li><li>profile &gt; application</li></ul><p>é…ç½®ä¸åŒå°±éƒ½ç”Ÿæ•ˆï¼ˆäº’è¡¥ï¼‰ï¼Œé…ç½®ç›¸åŒé«˜ä¼˜å…ˆçº§è¦†ç›–ä½ä¼˜å…ˆçº§</p><h2 id="å¯¼å…¥é…ç½®" tabindex="-1"><a class="header-anchor" href="#å¯¼å…¥é…ç½®" aria-hidden="true">#</a> å¯¼å…¥é…ç½®</h2><p>ä½¿ç”¨<code>spring.config.import</code>å¯ä»¥å¯¼å…¥é¢å¤–é…ç½®</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.config.import</span><span class="token punctuation">=</span><span class="token value attr-value">my.properties  # ä¼˜å…ˆ</span>
    
<span class="token key attr-name">my.property</span><span class="token punctuation">=</span><span class="token value attr-value">value</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ— è®ºä»¥ä¸Šå†™æ³•çš„å…ˆåé¡ºåºï¼Œ<code>my.properties</code>çš„å€¼æ€»æ˜¯ä¼˜å…ˆäºç›´æ¥åœ¨æ–‡ä»¶ä¸­ç¼–å†™çš„<code>my.property</code>ã€‚</p><h2 id="å±æ€§å ä½ç¬¦" tabindex="-1"><a class="header-anchor" href="#å±æ€§å ä½ç¬¦" aria-hidden="true">#</a> å±æ€§å ä½ç¬¦</h2><p>é…ç½®æ–‡ä»¶ä¸­å¯ä»¥ä½¿ç”¨ ${name:default}å½¢å¼å–å‡ºä¹‹å‰é…ç½®è¿‡çš„å€¼ã€‚</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">app.name</span><span class="token punctuation">=</span><span class="token value attr-value">MyApp</span>
<span class="token key attr-name">app.description</span><span class="token punctuation">=</span><span class="token value attr-value">${app.name} is a Spring Boot application written by ${username:Unknown}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å•å…ƒæµ‹è¯•-junit5" tabindex="-1"><a class="header-anchor" href="#å•å…ƒæµ‹è¯•-junit5" aria-hidden="true">#</a> å•å…ƒæµ‹è¯• Junit5</h2><p>to do</p><h1 id="æ ¸å¿ƒåŸç†" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒåŸç†" aria-hidden="true">#</a> æ ¸å¿ƒåŸç†</h1><p>to do</p><h1 id="å‚è€ƒ-1" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒ-1" aria-hidden="true">#</a> å‚è€ƒ</h1><p><a href="https://www.yuque.com/leifengyang/springboot3/wp5l9qbu1k64frz1#v1tQl" target="_blank" rel="noopener noreferrer">https://www.yuque.com/leifengyang/springboot3/wp5l9qbu1k64frz1#v1tQl<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://zhuanlan.zhihu.com/p/115891808" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/115891808<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/docs/spring/spring-framework/4.spring-boot.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><!----><!----></div></footer><nav class="page-nav"><a href="/blog-notes/dist/spring/spring-framework/3.mvc.html" class="nav-link prev" aria-label="Spring MVC å­¦ä¹ æ€»ç»“"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><span class="font-icon icon iconfont icon-page" style=""></span>Spring MVC å­¦ä¹ æ€»ç»“</div></a><!----></nav><div class="giscus-wrapper input-top" id="comment" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">Footer test</div><div class="copyright">jimi</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/blog-notes/dist/assets/app-6501f6c5.js" defer></script>
  </body>
</html>
